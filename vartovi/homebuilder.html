<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫ | –í–∞—Ä—Ç–æ–≤—ñ –ú—ñ—Å—Ç–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .game-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
            background: white;
            border-radius: 25px;
            padding: 25px 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .robot {
            font-size: 4em; /* –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ä–æ–∑–º—ñ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —ñ–∫–æ–Ω–∫–∏ */
            animation: bounce 2s ease-in-out infinite;
            display: inline-block;
        }
        
        .robot svg {
            width: 1.2em; /* –†–æ–∑–º—ñ—Ä SVG –≤—ñ–¥–Ω–æ—Å–Ω–æ font-size */
            height: 1.2em;
            fill: #667eea;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
        }

        h1 {
            font-size: 2.5em;
            color: #667eea;
            margin: 10px 0;
        }

        .level-info {
            font-size: 1.5em;
            color: #666;
            margin-top: 10px;
        }

        .voice-instruction {
            background: linear-gradient(135deg, #fff5e6 0%, #ffe0b2 100%);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 25px;
            text-align: center;
            border: 4px solid #ffa726;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .speaker-icon {
            font-size: 3em; /* –ö–æ–Ω—Ç—Ä–æ–ª—é—î —Ä–æ–∑–º—ñ—Ä SVG */
            cursor: pointer;
            transition: transform 0.2s;
            color: #f57c00;
        }
        
        .speaker-icon svg {
            width: 1em;
            height: 1em;
            fill: currentColor;
        }

        .speaker-icon:active {
            transform: scale(1.2);
        }

        .task-text {
            font-size: 1.8em;
            font-weight: bold;
            color: #f57c00;
        }
        
        /* –°—Ç–∏–ª—ñ –¥–ª—è SVG —ñ–∫–æ–Ω–æ–∫ –≤ —Ç–µ–∫—Å—Ç—ñ –∑–∞–≤–¥–∞–Ω—å */
        .task-text svg {
            vertical-align: middle;
            display: inline-block;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr; /* –ó–º—ñ–Ω–µ–Ω–æ: –æ–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ */
            gap: 20px;
            margin-bottom: 25px;
        }

        .blocks-panel {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            /* –î–æ–¥–∞–Ω–æ –≤—ñ–¥—Å—Ç—É–ø —ñ —Ä–∞–º–∫—É */
            margin-bottom: 20px;
            border-bottom: 4px dashed #999;
            padding-bottom: 20px;
        }

        .panel-title {
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 15px;
            color: #667eea;
            font-weight: bold;
            display: flex; /* –î–ª—è –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è SVG */
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .panel-title svg {
            width: 1.2em;
            height: 1.2em;
            fill: #667eea;
        }

        .blocks-grid {
            display: grid;
             /* –ó–º—ñ–Ω–µ–Ω–æ –¥–ª—è —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É –±–ª–æ–∫—ñ–≤ */
            grid-template-columns: repeat(auto-fit, 80px);
            gap: 15px;
            justify-content: center; /* –î–æ–¥–∞–Ω–æ –¥–ª—è —Ü–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –±–ª–æ–∫—ñ–≤ */
        }

        .block {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            border: 4px solid rgba(0,0,0,0.2);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.2s;
            touch-action: none;
            user-select: none;
            position: relative;
        }
        
        .block svg {
            width: 70%;
            height: 70%;
        }
        
        .block.shape-circle {
            border-radius: 50%;
        }
        
        .block.shape-square {
            border-radius: 8px;
        }

        .block:active {
            cursor: grabbing;
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .block.dragging {
            opacity: 0.5;
            transform: scale(1.1);
        }

        .building-area {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }

        .construction-site {
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            border: 4px dashed #999;
            border-radius: 15px;
            padding: 20px;
            min-height: 400px;
            position: relative;
        }

        /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –µ–º–æ–¥–∑—ñ */
        .construction-site::before, .construction-site::after {
            content: 'üöß';
            position: absolute;
            font-size: 3em;
            opacity: 0.3;
            top: 10px;
        }
        .construction-site::before {
            content: 'üöß';
            left: 15px;
            transform: rotate(-15deg);
        }
        .construction-site::after {
            content: 'üõ†Ô∏è';
            right: 15px;
            transform: rotate(15deg);
        }

        .construction-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .drop-zone {
            background: white;
            border: 3px dashed #ccc;
            border-radius: 15px;
            padding: 15px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: #2196f3;
            border-style: solid;
            transform: scale(1.05);
        }

        .zone-label {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .zone-label svg {
            vertical-align: middle;
            display: inline-block;
        }

        .zone-content {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }

        .zone-content .block {
            width: 60px;
            height: 60px;
        }
        
        .zone-content .block svg {
            width: 40px;
            height: 40px;
        }

        .building-structure {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 3px solid #ccc;
        }

        .building-title {
            font-size: 1.5em;
            text-align: center;
            margin-bottom: 45px;
            color: #666;
        }

        .tower {
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            gap: 5px;
            min-height: 200px;
            background: linear-gradient(to bottom, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }

        .tower::before {
            content: 'üèóÔ∏è';
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3em;
        }

        .tower-block {
            width: 80%;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid rgba(0,0,0,0.3);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            animation: placeBlock 0.3s ease-out;
            background-color: white !important;
        }
        
        .tower-block svg {
            width: 35px;
            height: 35px;
        }

        @keyframes placeBlock {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è "tada" –¥–ª—è –≤–µ–∂—ñ */
        @keyframes tada {
            0% { transform: scale(1); }
            10%, 20% { transform: scale(0.9) rotate(-3deg); }
            30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); }
            40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); }
            100% { transform: scale(1) rotate(0); }
        }
        .tada {
            animation: tada 1s ease;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);
            color: white;
            border: none;
            padding: 18px 35px;
            font-size: 1.5em;
            border-radius: 15px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        button svg {
            width: 1.2em;
            height: 1.2em;
            fill: currentColor;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button.reset {
            background: linear-gradient(135deg, #ffa726 0%, #fb8c00 100%);
        }

        button.build {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-size: 1.8em;
            padding: 20px 40px;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .score-board {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-top: 25px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .score {
            font-size: 2.5em;
            color: #667eea;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .score svg {
            width: 1.1em;
            height: 1.1em;
            fill: #ffd700;
        }

        .stars {
            font-size: 2em;
            margin-top: 10px;
            color: #ffca28;
        }
        
        .stars svg {
            width: 1em;
            height: 1em;
            fill: currentColor;
            margin: 0 2px;
        }

        .feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 40px;
            border-radius: 30px;
            font-size: 2em;
            font-weight: bold;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            z-index: 1000;
            text-align: center;
            max-width: 90%;
            transition: transform 0.3s;
        }

        .feedback.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .feedback.success {
            background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
            color: #2e7d32;
            border: 6px solid #4caf50;
        }

        .feedback.error {
            background: linear-gradient(135deg, #ffcdd2 0%, #ef9a9a 100%);
            color: #c62828;
            border: 6px solid #e57373;
        }

        .feedback-emoji {
            font-size: 3em;
            margin-bottom: 20px;
            animation: spin 0.5s ease-in-out;
        }

        @keyframes spin {
            from { transform: rotate(0deg) scale(0); }
            to { transform: rotate(360deg) scale(1); }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 999;
            display: none;
        }

        .overlay.show {
            display: block;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—ñ */
        #confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10000;
            overflow: hidden;
        }
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 15px;
            opacity: 0;
            animation: fall 5s linear forwards;
        }
        @keyframes fall {
            0% {
                transform: translateY(-10vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) rotate(720deg);
                opacity: 0;
            }
        }

        @media (max-width: 968px) {
            .game-area {
                grid-template-columns: 1fr;
            }
            
            .blocks-grid {
                /* –ê–¥–∞–ø—Ç—É—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±–ª–æ–∫—ñ–≤ —É —Ä—è–¥–∫—É */
                grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            }
            
            .construction-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            h1 {
                font-size: 2em;
            }
            
            .task-text {
                font-size: 1.4em;
            }
             .zone-label {
                font-size: 1.5em; /* –ó–º–µ–Ω—à—É—î–º–æ —à—Ä–∏—Ñ—Ç –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
            }
        }

        .drop-zone.correct {
            background: #c8e6c9;
            border-color: #4caf50;
            border-style: solid;
        }

        .drop-zone.wrong {
            background: #ffcdd2;
            border-color: #f44336;
            border-style: solid;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-5px); }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="robot">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12h-1.5c-.28 0-.5.22-.5.5v1c0 .28.22.5.5.5H20c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5zM4 12H2.5c-.28 0-.5.22-.5.5v1c0 .28.22.5.5.5H4c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5zm15 3H5c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-2c0-1.1-.9-2-2-2zM8.5 18H7v-1.5h1.5V18zm3.5 0h-1.5v-1.5H12V18zm3.5 0h-1.5v-1.5H15.5V18zM19 11c0-3.87-3.13-7-7-7S5 7.13 5 11v1h14v-1zm-8.5-4c.83 0 1.5.67 1.5 1.5S11.33 10 10.5 10s-1.5-.67-1.5-1.5S9.67 7 10.5 7zm3 0c.83 0 1.5.67 1.5 1.5S14.33 10 13.5 10s-1.5-.67-1.5-1.5S12.67 7 13.5 7z"/></svg>
            </div>
            <!-- –î–æ–¥–∞–Ω–æ –µ–º–æ–¥–∑—ñ -->
            <h1>üë∑ –ë—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫ üß±</h1>
            <div class="level-info">–†—ñ–≤–µ–Ω—å <span id="levelNum">1</span>/3</div>
        </div>

        <div class="voice-instruction">
            <div class="speaker-icon" onclick="speakInstruction()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
            </div>
            <div class="task-text" id="taskText"></div>
        </div>

        <div class="game-area">
             <!-- .blocks-panel —Ç–µ–ø–µ—Ä –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ .building-area -->
            <div class="building-area">
                <div class="panel-title">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 1v3h4V1h-4zm5.17 4.22L13 3.05V6h3.95l-1.78-1.78zM8.83 4.22L6.05 7H10V3.05l-1.17 1.17zM19 10.9V8h-2v2.9L15.55 9H8.45L7 10.9V8H5v2.9L3.46 9H2.55l2.67 4.61c.47.81 1.3 1.39 2.28 1.39h10c.98 0 1.81-.58 2.28-1.39L22.45 9h-.91L19 10.9zM19 18v-2H5v2h14zM5 22h14v-2H5v2z"/></svg>
                    –ú–∞–π–¥–∞–Ω—á–∏–∫ –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
                </div>
                <div class="construction-site">
                    <!-- –ü–∞–Ω–µ–ª—å –±–ª–æ–∫—ñ–≤ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–∞ —Å—é–¥–∏ -->
                    <div class="blocks-panel">
                        <div class="panel-title" id="blocksPanelTitle">üì¶ –ó–∞–ª–∏—à–∏–ª–∏—Å—è –±–ª–æ–∫–∏</div>
                        <div class="blocks-grid" id="blocksGrid"></div>
                    </div>

                    <div class="construction-grid" id="constructionGrid"></div>
                    
                    <div class="building-structure hidden" id="buildingStructure">
                        <div class="building-title">üè∞ –¢–≤–æ—è –≤–µ–∂–∞</div>
                        <div class="tower" id="tower"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="build" onclick="buildTower()" id="buildBtn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 1v3h4V1h-4zm5.17 4.22L13 3.05V6h3.95l-1.78-1.78zM8.83 4.22L6.05 7H10V3.05l-1.17 1.17zM19 10.9V8h-2v2.9L15.55 9H8.45L7 10.9V8H5v2.9L3.46 9H2.55l2.67 4.61c.47.81 1.3 1.39 2.28 1.39h10c.98 0 1.81-.58 2.28-1.39L22.45 9h-.91L19 10.9zM19 18v-2H5v2h14zM5 22h14v-2H5v2z"/></svg>
                –ü–æ–±—É–¥—É–≤–∞—Ç–∏!
            </button>
            <button class="reset" onclick="resetLevel()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                –°–∫–∏–Ω—É—Ç–∏
            </button>
            <button class="hidden" onclick="nextLevel()" id="nextBtn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/></svg>
                –ù–∞—Å—Ç—É–ø–Ω–∏–π —Ä—ñ–≤–µ–Ω—å
            </button>
        </div>

        <div class="score-board">
            <div class="score">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.5 2H19v2.04c-1.16.55-2.27 1.32-3.25 2.26-1.1.9-2.07 1.94-2.88 3.08C12.07 8.26 11.1 7.22 10 6.38c-.98-.94-2.09-1.7-3.25-2.26V2H5.5c-1.1 0-2 .9-2 2v.33c0 2.22 1.2 4.25 3 5.42 1.17.75 2.5 1.33 3.91 1.72.3.08.6.15.9.23-.27.1-.55.18-.81.25-1.4.39-2.73.97-3.91 1.72C3.7 15.05 2.5 17.08 2.5 19.3V22h1.48c.88 0 1.72-.3 2.44-.85.79-.62 1.74-1.03 2.75-1.2.16-.03.33-.05.5-.08.17.02.34.05.5.08 1.01.17 1.96.58 2.75 1.2.72.55 1.56.85 2.44.85H19v-2.7c0-2.22-1.2-4.25-3-5.42-1.17-.75-2.5-1.33-3.91-1.72-.3-.08-.6-.15-.9-.23.27-.1.55-.18.81.25 1.4-.39 2.73-.97 3.91 1.72 1.8 1.17 3 3.2 3 5.42V22h1.5c1.1 0 2-.9 2-2v-1.7c0-2.22-1.2-4.25-3-5.42-1.17-.75-2.5-1.33-3.91-1.72-.3-.08-.6-.15-.9-.23.27-.1.55-.18.81.25 1.4-.39 2.73-.97 3.91 1.72 1.8 1.17 3 3.2 3 5.42V22h1.5c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-15 18H4v-1.7c0-1.67.9-3.2 2.32-4.02.9-.53 1.94-.93 3.03-1.18.1-.02.2-.05.3-.07-.1.02-.2.04-.3.07-1.09.25-2.13.65-3.03 1.18C4.9 16.1 4 17.63 4 19.3V20zm16 0h-1.5v-1.7c0-1.67-.9-3.2-2.32-4.02-.9-.53-1.94-.93-3.03-1.18-.1-.02-.2-.05-.3-.07.1.02.2.04.3.07 1.09.25 2.13.65 3.03 1.18C19.1 16.1 20 17.63 20 19.3V20z"/></svg>
                <span id="scoreNum">0</span>
            </div>
            <div class="stars" id="stars"></div>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="feedback" id="feedback"></div>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—ñ -->
    <div id="confetti-container"></div>

    <script>
        // –û–±'—î–∫—Ç –∑ SVG-—Ñ–æ—Ä–º–∞–º–∏ –¥–ª—è –±–ª–æ–∫—ñ–≤
        const shapes = {
            circle: `<svg viewBox="0 0 100 100" style="fill:currentColor;"><circle cx="50" cy="50" r="50" /></svg>`,
            square: `<svg viewBox="0 0 100 100" style="fill:currentColor;"><rect width="100" height="100" rx="10" /></svg>`,
            triangle: `<svg viewBox="0 0 100 100" style="fill:currentColor;"><polygon points="50,0 100,100 0,100" /></svg>`,
            star: `<svg viewBox="0 0 100 100" style="fill:currentColor;"><polygon points="50,0 61,35 98,35 68,57 79,91 50,70 21,91 32,57 2,35 39,35" /></svg>`
        };
        
        // –û–±'—î–∫—Ç –∑ SVG-—ñ–∫–æ–Ω–∫–∞–º–∏ –¥–ª—è —Ç–µ–∫—Å—Ç—É
        const iconSVG = {
            circle: `<svg viewBox="0 0 100 100" width="18" height="18" style="fill:currentColor;vertical-align:middle;display:inline-block;"><circle cx="50" cy="50" r="50" /></svg>`,
            square: `<svg viewBox="0 0 100 100" width="18" height="18" style="fill:currentColor;vertical-align:middle;display:inline-block;"><rect width="100" height="100" rx="10" /></svg>`,
            star: `<svg viewBox="0 0 100 100" width="18" height="18" style="fill:currentColor;vertical-align:middle;display:inline-block;"><polygon points="50,0 61,35 98,35 68,57 79,91 50,70 21,91 32,57 2,35 39,35" /></svg>`,
            red: `<svg viewBox="0 0 100 100" width="18" height="18" style="fill:#ff6b6b;vertical-align:middle;display:inline-block;"><circle cx="50" cy="50" r="50" /></svg>`,
            blue: `<svg viewBox="0 0 100 100" width="18" height="18" style="fill:#3b82f6;vertical-align:middle;display:inline-block;"><circle cx="50" cy="50" r="50" /></svg>`,
            trash: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" style="fill:currentColor;vertical-align:middle;display:inline-block;"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></svg>`
        };

        const colors = {
            red: '#ff6b6b',
            blue: '#3b82f6',
            yellow: '#ffd93d',
            green: '#66bb6a',
            purple: '#9b59b6'
        };

        const levels = [
            {
                level: 1,
                task: `${iconSVG.red} –ß–µ—Ä–≤–æ–Ω—ñ –±–ª–æ–∫–∏ | ${iconSVG.blue} –°–∏–Ω—ñ –±–ª–æ–∫–∏`,
                speech: '–†–æ–∑—Å–æ—Ä—Ç—É–π –±–ª–æ–∫–∏ –∑–∞ –∫–æ–ª—å–æ—Ä–æ–º. –ß–µ—Ä–≤–æ–Ω—ñ –≤ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Å–∏–Ω—ñ –≤ —ñ–Ω—à–∏–π.',
                blocks: [
                    { id: 1, shape: 'square', color: 'red', size: 'normal' },
                    { id: 2, shape: 'circle', color: 'blue', size: 'normal' },
                    { id: 3, shape: 'triangle', color: 'red', size: 'normal' },
                    { id: 4, shape: 'square', color: 'blue', size: 'normal' },
                    { id: 5, shape: 'circle', color: 'red', size: 'normal' },
                    { id: 6, shape: 'triangle', color: 'blue', size: 'normal' },
                ],
                zones: [
                    { id: 'red', label: `${iconSVG.red} –ß–µ—Ä–≤–æ–Ω—ñ`, key: 'color', value: 'red' },
                    { id: 'blue', label: `${iconSVG.blue} –°–∏–Ω—ñ`, key: 'color', value: 'blue' }
                ]
            },
            {
                level: 2,
                task: `${iconSVG.circle} –ö–æ–ª–∞ | ${iconSVG.square} –ö–≤–∞–¥—Ä–∞—Ç–∏`,
                speech: '–†–æ–∑—Å–æ—Ä—Ç—É–π –±–ª–æ–∫–∏ –∑–∞ —Ñ–æ—Ä–º–æ—é. –ö—Ä—É–∂–µ—á–∫–∏ –≤ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∏ –≤ —ñ–Ω—à–∏–π.',
                blocks: [
                    { id: 7, shape: 'circle', color: 'red', size: 'normal' },
                    { id: 8, shape: 'square', color: 'blue', size: 'normal' },
                    { id: 9, shape: 'circle', color: 'yellow', size: 'normal' },
                    { id: 10, shape: 'square', color: 'green', size: 'normal' },
                    { id: 11, shape: 'circle', color: 'purple', size: 'normal' },
                    { id: 12, shape: 'square', color: 'red', size: 'normal' },
                ],
                zones: [
                    // –û–Ω–æ–≤–ª–µ–Ω–æ –º—ñ—Ç–∫–∏, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ SVG
                    { id: 'circles', label: `${iconSVG.circle} –ö–æ–ª–∞`, key: 'shape', value: 'circle' },
                    { id: 'squares', label: `${iconSVG.square} –ö–≤–∞–¥—Ä–∞—Ç–∏`, key: 'shape', value: 'square' }
                ]
            },
            {
                level: 3,
                task: `${iconSVG.blue}${iconSVG.square} –í–µ–ª–∏–∫—ñ —Å–∏–Ω—ñ | ${iconSVG.red}${iconSVG.circle} –ú–∞–ª–µ–Ω—å–∫—ñ —á–µ—Ä–≤–æ–Ω—ñ | ${iconSVG.trash} –Ü–Ω—à—ñ`,
                speech: '–°–∫–ª–∞–¥–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è! –ó–Ω–∞–π–¥–∏ –≤–µ–ª–∏–∫—ñ —Å–∏–Ω—ñ –∫–≤–∞–¥—Ä–∞—Ç–∏, –º–∞–ª–µ–Ω—å–∫—ñ —á–µ—Ä–≤–æ–Ω—ñ –∫–æ–ª–∞, –∞ —Ä–µ—à—Ç—É –≤ —Ç—Ä–µ—Ç—ñ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.',
                blocks: [
                    { id: 13, shape: 'square', color: 'blue', size: 'large' }, // +
                    { id: 14, shape: 'circle', color: 'red', size: 'small' }, // +
                    { id: 15, shape: 'triangle', color: 'yellow', size: 'normal' },
                    { id: 16, shape: 'square', color: 'blue', size: 'large' }, // +
                    { id: 17, shape: 'circle', color: 'red', size: 'small' }, // +
                    { id: 18, shape: 'square', color: 'red', size: 'large' },
                    { id: 19, shape: 'circle', color: 'blue', size: 'large' },
                    { id: 20, shape: 'square', color: 'green', size: 'small' },
                ],
                zones: [
                    { 
                        id: 'large-blue-squares', 
                        label: `${iconSVG.blue}${iconSVG.square} –í–µ–ª–∏–∫—ñ —Å–∏–Ω—ñ`, 
                        check: (b) => b.shape === 'square' && b.color === 'blue' && b.size === 'large'
                    },
                    { 
                        id: 'small-red-circles', 
                        label: `${iconSVG.red}${iconSVG.circle} –ú–∞–ª–µ–Ω—å–∫—ñ —á–µ—Ä–≤–æ–Ω—ñ`, 
                        check: (b) => b.shape === 'circle' && b.color === 'red' && b.size === 'small'
                    },
                    { 
                        id: 'others', 
                        label: `${iconSVG.trash} –Ü–Ω—à—ñ –±–ª–æ–∫–∏`, 
                        check: (b) => !(b.shape === 'square' && b.color === 'blue' && b.size === 'large') && 
                                      !(b.shape === 'circle' && b.color === 'red' && b.size === 'small')
                    }
                ]
            }
        ];

        let currentLevel = 0;
        let score = 0;
        let blocks = [];
        let draggedBlock = null;

        function initGame() {
            loadLevel(currentLevel);
            updateScore();
        }

        function loadLevel(levelIndex) {
            const level = levels[levelIndex];
            blocks = level.blocks.map(b => ({...b, zone: null}));
            
            document.getElementById('levelNum').textContent = level.level;
            document.getElementById('taskText').innerHTML = level.task;
            
            renderBlocks();
            renderZones(level.zones);
            
            document.getElementById('buildingStructure').classList.add('hidden');
            document.getElementById('buildBtn').disabled = false;
            document.getElementById('nextBtn').classList.add('hidden');
            document.getElementById('tower').innerHTML = '';
            
            speakInstruction();
        }

        function renderBlocks() {
            const grid = document.getElementById('blocksGrid');
            grid.innerHTML = '';

            // –û–Ω–æ–≤–ª—é—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –±–ª–æ–∫—ñ–≤
            const remainingBlocks = blocks.filter(b => b.zone === null);
            const panelTitle = document.getElementById('blocksPanelTitle');
            if (panelTitle) {
                panelTitle.innerHTML = `üì¶ –ó–∞–ª–∏—à–∏–ª–æ—Å—è –±–ª–æ–∫—ñ–≤: ${remainingBlocks.length}`;
            }
            
            remainingBlocks.forEach(block => {
                const div = document.createElement('div');
                div.className = 'block';
                div.draggable = true;
                
                div.style.color = colors[block.color]; 
                div.style.backgroundColor = 'white'; 
                div.style.borderColor = colors[block.color]; 
                div.innerHTML = shapes[block.shape]; 
                
                div.dataset.id = block.id;
                
                div.classList.add(`shape-${block.shape}`);
                
                if (block.size === 'small') {
                    div.querySelector('svg').style.width = '40%';
                    div.querySelector('svg').style.height = '40%';
                } else if (block.size === 'large') {
                    div.querySelector('svg').style.width = '90%';
                    div.querySelector('svg').style.height = '90%';
                }
                
                div.addEventListener('dragstart', handleDragStart);
                div.addEventListener('dragend', handleDragEnd);
                div.addEventListener('touchstart', handleTouchStart);
                div.addEventListener('touchmove', handleTouchMove);
                div.addEventListener('touchend', handleTouchEnd);
                
                grid.appendChild(div);
            });
        }

        function renderZones(zones) {
            const grid = document.getElementById('constructionGrid');
            grid.innerHTML = '';
            
            zones.forEach(zone => {
                const div = document.createElement('div');
                div.className = 'drop-zone';
                div.dataset.zoneId = zone.id;
                
                div.innerHTML = `
                    <div class="zone-label">${zone.label}</div>
                    <div class="zone-content"></div>
                `;
                
                div.addEventListener('dragover', handleDragOver);
                div.addEventListener('drop', handleDrop);
                div.addEventListener('dragenter', handleDragEnter);
                div.addEventListener('dragleave', handleDragLeave);
                
                grid.appendChild(div);
            });
        }

        function handleDragStart(e) {
            draggedBlock = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDragEnter(e) {
            const zone = e.target.closest('.drop-zone');
            if (zone) {
                zone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            const zone = e.target.closest('.drop-zone');
            if (zone && !zone.contains(e.relatedTarget)) {
                zone.classList.remove('drag-over');
            }
        }

        function handleDrop(e) {
            e.preventDefault();
            const zone = e.target.closest('.drop-zone');
            if (!zone || !draggedBlock) return;
            
            zone.classList.remove('drag-over');
            
            const blockId = parseInt(draggedBlock.dataset.id);
            const block = blocks.find(b => b.id === blockId);
            
            if (block.zone !== null) {
                const prevZone = document.querySelector(`[data-zone-id="${block.zone}"]`);
                if (prevZone) {
                    const prevContent = prevZone.querySelector('.zone-content');
                    const prevBlock = prevContent.querySelector(`[data-id="${blockId}"]`);
                    if (prevBlock) prevBlock.remove();
                }
            }
            
            block.zone = zone.dataset.zoneId;
            
            const zoneContent = zone.querySelector('.zone-content');
            const clone = draggedBlock.cloneNode(true); 
            clone.draggable = false;
            clone.addEventListener('click', () => removeFromZone(blockId));
            zoneContent.appendChild(clone);
            
            draggedBlock.remove();
            renderBlocks(); // –û–Ω–æ–≤–ª—é—î –ª—ñ—á–∏–ª—å–Ω–∏–∫
            
            playSound('place');
        }

        let touchClone = null;
        let touchBlock = null;

        function handleTouchStart(e) {
            touchBlock = e.target.closest('.block');
            if (!touchBlock) return;
            
            touchClone = touchBlock.cloneNode(true);
            touchClone.style.position = 'fixed';
            touchClone.style.zIndex = '10000';
            touchClone.style.pointerEvents = 'none';
            touchClone.style.opacity = '0.8';
            touchClone.style.width = touchBlock.offsetWidth + 'px';
            touchClone.style.height = touchBlock.offsetHeight + 'px';
            document.body.appendChild(touchClone);
            updateTouchPosition(e.touches[0]);
        }

        function handleTouchMove(e) {
            e.preventDefault();
            if (!touchClone) return;
            updateTouchPosition(e.touches[0]);
        }

        function updateTouchPosition(touch) {
            if (!touchClone) return;
            const size = touchClone.offsetWidth;
            touchClone.style.left = (touch.clientX - size / 2) + 'px';
            touchClone.style.top = (touch.clientY - size / 2) + 'px';
        }

        function handleTouchEnd(e) {
            if (!touchClone || !touchBlock) return;
            
            const touch = e.changedTouches[0];
            touchClone.style.display = 'none';
            const dropTarget = document.elementFromPoint(touch.clientX, touch.clientY);
            touchClone.style.display = '';
            
            const zone = dropTarget?.closest('.drop-zone');
            
            if (zone) {
                const blockId = parseInt(touchBlock.dataset.id);
                const block = blocks.find(b => b.id === blockId);
                
                if (block.zone !== null) {
                    const prevZone = document.querySelector(`[data-zone-id="${block.zone}"]`);
                    if (prevZone) {
                        const prevContent = prevZone.querySelector('.zone-content');
                        const prevBlock = prevContent.querySelector(`[data-id="${blockId}"]`);
                        if (prevBlock) prevBlock.remove();
                    }
                }
                
                block.zone = zone.dataset.zoneId;
                
                const zoneContent = zone.querySelector('.zone-content');
                const clone = touchBlock.cloneNode(true);
                clone.draggable = false;
                clone.addEventListener('click', () => removeFromZone(blockId));
                zoneContent.appendChild(clone);
                
                touchBlock.remove();
                renderBlocks(); // –û–Ω–æ–≤–ª—é—î –ª—ñ—á–∏–ª—å–Ω–∏–∫
                playSound('place');
            }
            
            touchClone.remove();
            touchClone = null;
            touchBlock = null;
        }

        function removeFromZone(blockId) {
            const block = blocks.find(b => b.id === blockId);
            block.zone = null;
            
            const zones = document.querySelectorAll('.zone-content');
            zones.forEach(zone => {
                const blockEl = zone.querySelector(`[data-id="${blockId}"]`);
                if (blockEl) blockEl.remove();
            });
            
            renderBlocks(); // –û–Ω–æ–≤–ª—é—î –ª—ñ—á–∏–ª—å–Ω–∏–∫
            playSound('remove');
        }

        function buildTower() {
            if (blocks.some(b => b.zone === null)) {
                showFeedback('üòï', '–°–ø–æ—á–∞—Ç–∫—É —Ä–æ–∑—Å–æ—Ä—Ç—É–π –≤—Å—ñ –±–ª–æ–∫–∏!', false);
                playSound('error');
                return;
            }

            const level = levels[currentLevel];
            let allCorrect = true;
            
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('correct', 'wrong');
            });

            level.zones.forEach(zone => {
                const blocksInZone = blocks.filter(b => b.zone === zone.id);
                const zoneElement = document.querySelector(`[data-zone-id="${zone.id}"]`);
                
                let zoneCorrect = true;
                
                blocksInZone.forEach(block => {
                    let isCorrect = false;
                    
                    if (zone.check) {
                        isCorrect = zone.check(block);
                    } else {
                        isCorrect = block[zone.key] === zone.value;
                    }
                    
                    if (!isCorrect) {
                        zoneCorrect = false;
                        allCorrect = false;
                    }
                });

                const requiredBlocks = blocks.filter(b => {
                     if (zone.check) return zone.check(b);
                     return b[zone.key] === zone.value;
                });

                if (requiredBlocks.length !== blocksInZone.length) {
                    zoneCorrect = false;
                    allCorrect = false;
                }
                
                if (requiredBlocks.length > 0 || blocksInZone.length > 0) {
                     zoneElement.classList.add(zoneCorrect ? 'correct' : 'wrong');
                }
            });

            if (allCorrect) {
                score += 100;
                updateScore();
                buildTowerAnimation();
                launchConfetti(); // –ó–∞–ø—É—Å–∫–∞—î–º–æ –∫–æ–Ω—Ñ–µ—Ç—ñ!
                showFeedback('üéâ', '–ß—É–¥–æ–≤–æ! –†–æ–±–æ—Ç –∑–±—É–¥—É–≤–∞–≤ –≤–µ–∂—É!', true);
                playSound('success');
                
                document.getElementById('buildBtn').disabled = true;
                
                if (currentLevel < levels.length - 1) {
                    setTimeout(() => {
                        document.getElementById('nextBtn').classList.remove('hidden');
                    }, 2000);
                } else {
                    setTimeout(() => {
                        showFeedback('üèÜ', '–í—ñ—Ç–∞—î–º–æ! –¢–∏ –ø—Ä–æ–π—à–æ–≤ –≤—Å—ñ —Ä—ñ–≤–Ω—ñ!', true);
                    }, 2000);
                }
            } else {
                showFeedback('üòä', '–î–µ—è–∫—ñ –±–ª–æ–∫–∏ –Ω–µ –Ω–∞ —Å–≤–æ—ó—Ö –º—ñ—Å—Ü—è—Ö. –°–ø—Ä–æ–±—É–π —â–µ!', false);
                playSound('error');
            }
        }

        function buildTowerAnimation() {
            document.getElementById('buildingStructure').classList.remove('hidden');
            const tower = document.getElementById('tower');
            tower.innerHTML = '';
            
            // –î–æ–¥–∞—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é "tada"
            tower.classList.add('tada');
            setTimeout(() => {
                tower.classList.remove('tada');
            }, 1000); // –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó 1—Å
            
            const sortedBlocks = blocks.slice().sort(() => Math.random() - 0.5);
            
            sortedBlocks.forEach((block, index) => {
                setTimeout(() => {
                    const towerBlock = document.createElement('div');
                    towerBlock.className = 'tower-block';
                    towerBlock.style.color = colors[block.color]; 
                    towerBlock.style.borderColor = colors[block.color];
                    towerBlock.innerHTML = shapes[block.shape]; 
                    tower.appendChild(towerBlock);
                }, index * 300);
            });
        }

        function resetLevel() {
            blocks.forEach(b => b.zone = null);
            
            document.querySelectorAll('.zone-content').forEach(zone => {
                zone.innerHTML = '';
            });
            
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('correct', 'wrong');
            });
            
            renderBlocks();
            
            document.getElementById('buildingStructure').classList.add('hidden');
            document.getElementById('buildBtn').disabled = false;
            
            playSound('reset');
        }

        function nextLevel() {
            currentLevel++;
            if (currentLevel >= levels.length) {
                currentLevel = 0;
            }
            loadLevel(currentLevel);
            playSound('next');
        }

        function updateScore() {
            document.getElementById('scoreNum').textContent = score;
            const numStars = Math.min(Math.floor(score / 100), 10);
            document.getElementById('stars').innerHTML = iconSVG.star.repeat(numStars);
        }

        function speakInstruction() {
            const level = levels[currentLevel];
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(level.speech);
                utterance.lang = 'uk-UA';
                utterance.rate = 0.85;
                utterance.pitch = 1.1;
                speechSynthesis.cancel();
                speechSynthesis.speak(utterance);
            }
            
            const speaker = document.querySelector('.speaker-icon');
            speaker.style.transform = 'scale(1.3)';
            setTimeout(() => speaker.style.transform = 'scale(1)', 300);
        }

        function showFeedback(emoji, text, isSuccess) {
            const feedback = document.getElementById('feedback');
            const overlay = document.getElementById('overlay');
            
            feedback.innerHTML = `
                <div class="feedback-emoji">${emoji}</div>
                <div>${text}</div>
            `;
            feedback.className = 'feedback show ' + (isSuccess ? 'success' : 'error');
            overlay.classList.add('show');
            
            setTimeout(() => {
                feedback.classList.remove('show');
                overlay.classList.remove('show');
            }, isSuccess ? 3000 : 2000);
        }

        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                const sounds = {
                    place: { freq: 600, duration: 0.1, gain: 0.08 },
                    remove: { freq: 400, duration: 0.08, gain: 0.06 },
                    success: { freq: 800, duration: 0.25, gain: 0.15 },
                    error: { freq: 200, duration: 0.2, gain: 0.12 },
                    reset: { freq: 500, duration: 0.1, gain: 0.08 },
                    next: { freq: 700, duration: 0.15, gain: 0.1 }
                };
                
                const sound = sounds[type] || sounds.place;
                oscillator.frequency.value = sound.freq;
                gainNode.gain.value = sound.gain;
                oscillator.start();
                oscillator.stop(audioContext.currentTime + sound.duration);
            } catch (e) {
                // –ó–≤—É–∫ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ñ–µ—Ç—ñ
        function launchConfetti() {
            const container = document.getElementById('confetti-container');
            if (!container) return;

            const confettiColors = ['#ff6b6b', '#3b82f6', '#ffd93d', '#66bb6a', '#9b59b6'];
            const confettiCount = 100;

            for (let i = 0; i < confettiCount; i++) {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                
                const xPos = Math.random() * 100 + 'vw';
                const randomColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                const randomDelay = Math.random() * 2 + 's';
                const randomDuration = Math.random() * 3 + 3 + 's'; // 3-6 —Å–µ–∫—É–Ω–¥
                
                piece.style.left = xPos;
                piece.style.backgroundColor = randomColor;
                piece.style.width = (Math.random() * 8 + 5) + 'px'; // 5-13px
                piece.style.height = (Math.random() * 15 + 10) + 'px'; // 10-25px
                piece.style.animationDelay = randomDelay;
                piece.style.animationDuration = randomDuration;
                
                container.appendChild(piece);
                
                // –í–∏–¥–∞–ª—è—î–º–æ —á–∞—Å—Ç–∏–Ω–∫—É –ø—ñ—Å–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó
                setTimeout(() => {
                    piece.remove();
                }, (parseFloat(randomDelay) + parseFloat(randomDuration)) * 1000);
            }
        }

        // –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∑—É–º—É –Ω–∞ –ø–æ–¥–≤—ñ–π–Ω–∏–π —Ç–∞–ø
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≥—Ä–∏
        initGame();
    </script>
</body>
</html>
