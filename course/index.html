<!DOCTYPE html>
<html lang="uk" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CS Mobile Course</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind Config for Custom Colors/Fonts -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        dark: '#0f172a',
                        darkSec: '#1e293b',
                    },
                    aspectRatio: {
                        '9/16': '9 / 16',
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Hide scrollbar for clean mobile look but allow scrolling */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Smooth transitions for theme switch */
        body {
            transition: background-color 0.3s, color 0.3s;
        }

        /* Video placeholder animation */
        .video-placeholder {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-dark dark:text-gray-100 font-sans antialiased pb-20 md:pb-0">

    <!-- Main App Container -->
    <!-- Centered on desktop to mimic mobile app view -->
    <div id="app" class="max-w-lg mx-auto min-h-screen bg-white dark:bg-darkSec shadow-2xl relative overflow-hidden flex flex-col">

        <!-- HEADER -->
        <header class="sticky top-0 z-50 bg-white/90 dark:bg-darkSec/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 px-4 py-4 flex justify-between items-center h-16 transition-colors">
            <div class="flex items-center gap-3">
                <button id="backBtn" class="hidden text-2xl text-primary hover:opacity-80 transition-opacity">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <h1 id="headerTitle" class="text-xl font-bold tracking-tight">CS Course</h1>
            </div>
            
            <button id="themeToggle" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-yellow-400 transition-all active:scale-95">
                <i class="fa-solid fa-moon dark:hidden"></i>
                <i class="fa-solid fa-sun hidden dark:block"></i>
            </button>
        </header>

        <!-- CONTENT AREA -->
        <main id="contentArea" class="flex-1 overflow-y-auto no-scrollbar scroll-smooth">
            <!-- Dynamic Content Injected Here -->
        </main>

    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA STRUCTURE ---
        const curriculum = [
            {
                id: 0,
                title: "–ú–æ–¥—É–ª—å 0. –°—Ç–∞—Ä—Ç —ñ –ø—Ä–∞–≤–∏–ª–∞",
                lessons: [
                    { id: "0.1", title: "–Ø–∫ –ø—Ä–∞—Ü—é—î –∫—É—Ä—Å" },
                    { id: "0.2", title: "–ù–∞–≤—ñ—â–æ –∫–æ–º–ø‚Äô—é—Ç–µ—Ä–Ω–∞ –Ω–∞—É–∫–∞" },
                    { id: "0.3", title: "–ú—ñ–Ω—ñ–ø—Ä–æ—î–∫—Ç 0/1: —è–∫ –∫–æ–º–ø‚Äô—é—Ç–µ—Ä ‚Äú—Ä–∞—Ö—É—î‚Äù" }
                ]
            },
            {
                id: 1,
                title: "–ú–æ–¥—É–ª—å 1. –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —ñ –¥–∞–Ω—ñ",
                lessons: [
                    { id: "1.1", title: "–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –∫—Ä—ñ–∑—å –≤—ñ–∫–∏" },
                    { id: "1.2", title: "–î–∞–Ω—ñ vs —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è" },
                    { id: "1.3", title: "–ú–æ–¥–µ–ª—ñ —Ç–∞ –ø—Ä–∞–≤–∏–ª–∞" }
                ]
            },
            {
                id: 2,
                title: "–ú–æ–¥—É–ª—å 2. –ö–æ–º–ø‚Äô—é—Ç–µ—Ä —è–∫ —Å–∏—Å—Ç–µ–º–∞",
                lessons: [
                    { id: "2.1", title: "Input‚ÄìProcess‚ÄìOutput" },
                    { id: "2.2", title: "–ü—Ä–∏—Å—Ç—Ä–æ—ó –≤–≤–µ–¥–µ–Ω–Ω—è" },
                    { id: "2.3", title: "–ü—Ä–∏—Å—Ç—Ä–æ—ó –≤–∏–≤–µ–¥–µ–Ω–Ω—è" },
                    { id: "2.4", title: "CPU / RAM / SSD" }
                ]
            },
            {
                id: 3,
                title: "–ú–æ–¥—É–ª—å 3. –ö–æ–¥—É–≤–∞–Ω–Ω—è —Å–≤—ñ—Ç—É",
                lessons: [
                    { id: "3.1", title: "–î–≤—ñ–π–∫–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞" },
                    { id: "3.2", title: "–ë—ñ—Ç–∏, –±–∞–π—Ç–∏, –º–µ–≥–∞–±–∞–π—Ç–∏" },
                    { id: "3.3", title: "–¢–µ–∫—Å—Ç = —á–∏—Å–ª–∞ (ASCII/Unicode)" },
                    { id: "3.4", title: "–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è = –ø—ñ–∫—Å–µ–ª—ñ" },
                    { id: "3.5", title: "–ó–≤—É–∫ = –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —Ö–≤–∏–ª—ñ" }
                ]
            },
            {
                id: 4,
                title: "–ú–æ–¥—É–ª—å 4. –û–°, —Ñ–∞–π–ª–∏, —Ö–º–∞—Ä–∞",
                lessons: [
                    { id: "4.1", title: "–©–æ —Ä–æ–±–∏—Ç—å –û–°" },
                    { id: "4.2", title: "–§–∞–π–ª–∏, –ø–∞–ø–∫–∏, —Ñ–æ—Ä–º–∞—Ç–∏" },
                    { id: "4.3", title: "–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –±–µ–∫–∞–ø–∏" },
                    { id: "4.4", title: "–•–º–∞—Ä–∞ —ñ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è" }
                ]
            },
            {
                id: 5,
                title: "–ú–æ–¥—É–ª—å 5. –ü—Ä–æ–≥—Ä–∞–º–∏ —ñ –ø–æ–±—É—Ç",
                lessons: [
                    { id: "5.1", title: "Hardware vs Software" },
                    { id: "5.2", title: "–°–∏—Å—Ç–µ–º–Ω–µ vs –ø—Ä–∏–∫–ª–∞–¥–Ω–µ –ü–ó" },
                    { id: "5.3", title: "–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ –¥–æ–∑–≤–æ–ª–∏" }
                ]
            },
            {
                id: 6,
                title: "–ú–æ–¥—É–ª—å 6. –û–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–µ –º–∏—Å–ª–µ–Ω–Ω—è",
                lessons: [
                    { id: "6.1", title: "–î–µ–∫–æ–º–ø–æ–∑–∏—Ü—ñ—è" },
                    { id: "6.2", title: "–ê–ª–≥–æ—Ä–∏—Ç–º = —Ä–µ—Ü–µ–ø—Ç" },
                    { id: "6.3", title: "–£–º–æ–≤–∏ (IF)" },
                    { id: "6.4", title: "–¶–∏–∫–ª–∏ (FOR/WHILE)" },
                    { id: "6.5", title: "Debug: –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫" }
                ]
            },
            {
                id: 7,
                title: "–ú–æ–¥—É–ª—å 7. –ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è",
                lessons: [
                    { id: "7.1", title: "–©–æ —Ç–∞–∫–µ –ø—Ä–æ–≥—Ä–∞–º–∞" },
                    { id: "7.2", title: "–ó–º—ñ–Ω–Ω—ñ —Ç–∞ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö" },
                    { id: "7.3", title: "–§—É–Ω–∫—Ü—ñ—ó" },
                    { id: "7.4", title: "–ú—ñ–Ω—ñ–ø—Ä–æ—î–∫—Ç: –º—ñ–Ω—ñ-–±–æ—Ç" }
                ]
            },
            {
                id: 8,
                title: "–ú–æ–¥—É–ª—å 8. –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç —ñ –≤–µ–±",
                lessons: [
                    { id: "8.1", title: "–ö–ª—ñ—î–Ω—Ç —ñ —Å–µ—Ä–≤–µ—Ä" },
                    { id: "8.2", title: "DNS —ñ –∞–¥—Ä–µ—Å–∏" },
                    { id: "8.3", title: "HTTP/HTTPS" },
                    { id: "8.4", title: "Cookies —ñ —Å–µ—Å—ñ—ó" }
                ]
            },
            {
                id: 9,
                title: "–ú–æ–¥—É–ª—å 9. –î–∞–Ω—ñ",
                lessons: [
                    { id: "9.1", title: "–¢–∞–±–ª–∏—Ü—ñ —ñ —Ñ—ñ–ª—å—Ç—Ä–∏" },
                    { id: "9.2", title: "–ì—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ –¥—ñ–∞–≥—Ä–∞–º–∏" },
                    { id: "9.3", title: "–ë–∞–∑–∏ –¥–∞–Ω–∏—Ö" }
                ]
            },
            {
                id: 10,
                title: "–ú–æ–¥—É–ª—å 10. –®–Ü —Ç–∞ –∫—Ä–∏—Ç–∏—á–Ω–µ –º–∏—Å–ª–µ–Ω–Ω—è",
                lessons: [
                    { id: "10.1", title: "–ü—Ä–æ–≥—Ä–∞–º–∞ vs –®–Ü" },
                    { id: "10.2", title: "–ì–∞–ª—é—Ü–∏–Ω–∞—Ü—ñ—ó –®–Ü" },
                    { id: "10.3", title: "–ë–µ–∑–ø–µ—á–Ω–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞–Ω–Ω—è –®–Ü" }
                ]
            },
            {
                id: 11,
                title: "–ú–æ–¥—É–ª—å 11. –ë–µ–∑–ø–µ–∫–∞",
                lessons: [
                    { id: "11.1", title: "–ü–∞—Ä–æ–ª—ñ —Ç–∞ 2FA" },
                    { id: "11.2", title: "–§—ñ—à–∏–Ω–≥ —ñ —à–∞—Ö—Ä–∞–π—Å—Ç–≤–æ" },
                    { id: "11.3", title: "–ü—Ä–∏–≤–∞—Ç–Ω—ñ—Å—Ç—å" },
                    { id: "11.4", title: "–¶–∏—Ñ—Ä–æ–≤–∏–π —Å–ª—ñ–¥" },
                    { id: "11.5", title: "–ú–µ–¥—ñ–∞–≥—Ä–∞–º–æ—Ç–Ω—ñ—Å—Ç—å" }
                ]
            },
            {
                id: 12,
                title: "–§—ñ–Ω–∞–ª",
                lessons: [
                    { id: "F.1", title: "–ö–∞–ø—Å—Ç–æ—É–Ω-–ø—Ä–æ—î–∫—Ç" }
                ]
            }
        ];

        // --- STATE MANAGEMENT ---
        const state = {
            currentView: 'landing', // Changed initial state to landing
            activeModuleId: null,
            activeLesson: null,
            completedLessons: JSON.parse(localStorage.getItem('cs_completed')) || []
        };

        // --- DOM ELEMENTS ---
        const app = document.getElementById('app');
        const contentArea = document.getElementById('contentArea');
        const headerTitle = document.getElementById('headerTitle');
        const backBtn = document.getElementById('backBtn');
        const themeToggle = document.getElementById('themeToggle');

        // --- THEME LOGIC ---
        function initTheme() {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        }

        themeToggle.addEventListener('click', () => {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
        });

        // --- RENDER FUNCTIONS ---

        // 0. Render Landing Page (New)
        function renderLanding() {
            state.currentView = 'landing';
            backBtn.classList.add('hidden');
            headerTitle.textContent = 'CS Course';
            contentArea.scrollTop = 0;

            const hasProgress = state.completedLessons.length > 0;
            const btnText = hasProgress ? '–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è' : '–ü–æ—á–∞—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è';

            contentArea.innerHTML = `
                <div class="flex flex-col items-center justify-center min-h-[85vh] p-6 text-center space-y-8 relative">
                    
                    <!-- Decorative background blob -->
                    <div class="absolute top-1/4 left-1/2 -translate-x-1/2 w-64 h-64 bg-blue-400/20 dark:bg-blue-600/20 rounded-full blur-3xl animate-blob -z-10"></div>

                    <!-- Icon -->
                    <div class="relative">
                        <div class="w-24 h-24 bg-white dark:bg-slate-800 rounded-2xl shadow-xl flex items-center justify-center transform rotate-3">
                            <i class="fa-solid fa-microchip text-5xl text-primary"></i>
                        </div>
                        <div class="absolute -bottom-2 -right-2 w-10 h-10 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg border-2 border-white dark:border-darkSec">
                            <i class="fa-solid fa-bolt text-white text-sm"></i>
                        </div>
                    </div>

                    <!-- Hero Text -->
                    <div class="space-y-4 max-w-xs mx-auto">
                        <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 dark:text-white leading-none">
                            –ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ –Ω–∞—É–∫–∞ <span class="text-primary block mt-2">–±–µ–∑ –±–æ–ª—é</span>
                        </h1>
                        <p class="text-lg text-gray-600 dark:text-gray-400 leading-relaxed">
                            –¢–≤—ñ–π –≥—ñ–¥ —É —Ü–∏—Ñ—Ä–æ–≤–æ–º—É —Å–≤—ñ—Ç—ñ. –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ñ –≤—ñ–¥–µ–æ, —Ç–µ–æ—Ä—ñ—è –±–µ–∑ –≤–æ–¥–∏ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞.
                        </p>
                    </div>

                    <!-- Features Grid -->
                    <div class="grid grid-cols-2 gap-3 w-full max-w-sm text-left">
                        <div class="bg-white/50 dark:bg-slate-800/50 backdrop-blur p-4 rounded-xl border border-gray-100 dark:border-slate-700 shadow-sm">
                            <i class="fa-solid fa-clock text-blue-500 mb-2"></i>
                            <h3 class="font-bold text-sm">–®–≤–∏–¥–∫–æ</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">–£—Ä–æ–∫–∏ –¥–æ 5 —Ö–≤</p>
                        </div>
                        <div class="bg-white/50 dark:bg-slate-800/50 backdrop-blur p-4 rounded-xl border border-gray-100 dark:border-slate-700 shadow-sm">
                            <i class="fa-solid fa-mobile-screen text-purple-500 mb-2"></i>
                            <h3 class="font-bold text-sm">–ó—Ä—É—á–Ω–æ</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Mobile-first</p>
                        </div>
                    </div>

                    <!-- CTA Button -->
                    <button onclick="renderHome()" class="w-full max-w-sm bg-dark dark:bg-white text-white dark:text-dark text-xl font-bold py-4 rounded-2xl shadow-xl shadow-gray-200 dark:shadow-none transition-all transform hover:scale-[1.02] active:scale-95 group relative overflow-hidden">
                        <span class="relative z-10 flex items-center justify-center gap-2">
                            ${btnText} <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                        </span>
                    </button>
                    
                    <p class="text-xs text-gray-400">–ë–µ–∑ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó ‚Ä¢ –ü—Ä–æ–≥—Ä–µ—Å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è</p>
                </div>
            `;
        }

        // 1. Render Module List (Home View)
        function renderHome() {
            state.currentView = 'home';
            // If coming from landing, we usually don't show back button to landing, 
            // but treat Home as the main dashboard.
            backBtn.classList.add('hidden'); 
            headerTitle.textContent = '–ù–∞–≤—á–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω';
            contentArea.scrollTop = 0;

            let html = `<div class="p-4 space-y-4 pb-12 animate-fade-in">`;
            
            // Progress Header
            const progress = Math.round((state.completedLessons.length / 45) * 100); // approx count
            html += `
                <div class="bg-primary text-white p-6 rounded-2xl shadow-lg mb-6 relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 text-white/10 text-9xl">
                        <i class="fa-solid fa-chart-pie"></i>
                    </div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-end mb-2">
                            <h2 class="text-2xl font-bold">–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å</h2>
                            <span class="text-3xl font-bold">${progress}%</span>
                        </div>
                        <div class="w-full bg-black/20 rounded-full h-2">
                            <div class="bg-white h-2 rounded-full transition-all duration-1000 ease-out" style="width: ${progress}%"></div>
                        </div>
                        <p class="text-sm mt-2 opacity-90 font-medium">
                            ${progress === 0 ? '–ü–æ—á–Ω—ñ—Ç—å –∑ –ú–æ–¥—É–ª—è 0!' : '–ß—É–¥–æ–≤–∏–π —Ç–µ–º–ø, —Ç–∞–∫ —Ç—Ä–∏–º–∞—Ç–∏!'}
                        </p>
                    </div>
                </div>
            `;

            // Modules Accordion
            curriculum.forEach(module => {
                const isOpen = state.activeModuleId === module.id;
                
                // Calculate module progress
                const totalInModule = module.lessons.length;
                const completedInModule = module.lessons.filter(l => state.completedLessons.includes(l.id)).length;
                const isModuleDone = totalInModule === completedInModule && totalInModule > 0;
                
                html += `
                    <div class="bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden transition-all duration-300">
                        <button onclick="toggleModule(${module.id})" class="w-full text-left p-5 flex justify-between items-center active:bg-gray-50 dark:active:bg-slate-700 outline-none">
                            <div class="flex-1 pr-4">
                                <div class="flex items-center gap-2 mb-1">
                                    <h3 class="font-bold text-lg text-gray-800 dark:text-gray-100 leading-tight">${module.title}</h3>
                                    ${isModuleDone ? '<i class="fa-solid fa-circle-check text-green-500"></i>' : ''}
                                </div>
                                <div class="flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400">
                                    <span>${module.lessons.length} —É—Ä–æ–∫—ñ–≤</span>
                                    <span class="w-1 h-1 rounded-full bg-gray-300"></span>
                                    <span>${completedInModule}/${totalInModule} –ø—Ä–æ–π–¥–µ–Ω–æ</span>
                                </div>
                            </div>
                            <div class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-50 dark:bg-slate-700 text-gray-400 transition-transform duration-300 ${isOpen ? 'rotate-180 bg-blue-50 text-blue-500 dark:bg-blue-900/30' : ''}">
                                <i class="fa-solid fa-chevron-down text-sm"></i>
                            </div>
                        </button>
                        
                        <div class="${isOpen ? 'block' : 'hidden'} border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-slate-900/50 animate-slide-down">
                            ${module.lessons.map(lesson => {
                                const isDone = state.completedLessons.includes(lesson.id);
                                return `
                                <button onclick="openLesson('${lesson.id}')" class="w-full p-4 pl-6 text-left flex items-center gap-4 hover:bg-white dark:hover:bg-slate-800 border-b border-gray-100 dark:border-gray-800 last:border-0 transition-colors group">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${isDone ? 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400' : 'bg-white dark:bg-slate-800 border border-gray-200 dark:border-gray-700 text-gray-400 group-hover:border-primary group-hover:text-primary'}">
                                        <i class="fa-solid ${isDone ? 'fa-check' : 'fa-play'} text-sm"></i>
                                    </div>
                                    <div class="flex-1">
                                        <span class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-0.5">–£—Ä–æ–∫ ${lesson.id}</span>
                                        <span class="font-medium text-gray-700 dark:text-gray-200 text-base leading-snug">${lesson.title}</span>
                                    </div>
                                    <i class="fa-solid fa-chevron-right text-gray-300 text-xs opacity-0 group-hover:opacity-100 transition-opacity"></i>
                                </button>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            contentArea.innerHTML = html;
        }

        // 2. Render Lesson View
        function renderLessonView(lessonId) {
            const module = curriculum.find(m => m.lessons.some(l => l.id === lessonId));
            const lesson = module.lessons.find(l => l.id === lessonId);
            
            state.currentView = 'lesson';
            state.activeLesson = lesson;
            
            backBtn.classList.remove('hidden');
            headerTitle.textContent = lesson.id; // Short title for header
            contentArea.scrollTop = 0;

            // Simulating Lesson Content
            const isCompleted = state.completedLessons.includes(lessonId);
            
            contentArea.innerHTML = `
                <div class="flex flex-col min-h-full animate-fade-in">
                    <!-- Vertical Video Container (9:16) -->
                    <div class="w-full aspect-[9/16] max-h-[75vh] bg-black relative flex items-center justify-center video-placeholder overflow-hidden shadow-lg group">
                        <div class="absolute inset-0 bg-black/40 group-hover:bg-black/30 transition-colors"></div>
                        
                        <div class="absolute inset-0 flex flex-col items-center justify-center text-white p-6 text-center z-10">
                            <div class="w-20 h-20 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mb-6 shadow-2xl ring-4 ring-white/10 group-hover:scale-110 transition-transform duration-300 cursor-pointer">
                                <i class="fa-solid fa-play text-3xl pl-1"></i>
                            </div>
                            <h2 class="text-2xl font-bold drop-shadow-md px-4">${lesson.title}</h2>
                            <p class="mt-2 text-sm opacity-80 font-medium tracking-wide uppercase">–î–∏–≤–∏—Ç–∏—Å—å —É—Ä–æ–∫ (5 —Ö–≤)</p>
                        </div>
                        
                        <!-- Video Controls Simulation -->
                        <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent">
                            <div class="w-full bg-white/30 h-1 rounded-full overflow-hidden">
                                <div class="bg-primary h-full w-1/3"></div>
                            </div>
                            <div class="flex justify-between text-xs text-white/80 mt-2 font-mono">
                                <span>1:42</span>
                                <span>5:00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Text Theory Section -->
                    <div class="p-6 bg-white dark:bg-darkSec rounded-t-3xl -mt-6 relative z-20 flex-1 shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.3)]">
                        <div class="w-12 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-8"></div>
                        
                        <div class="mb-8">
                            <span class="inline-block px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-primary text-xs font-bold uppercase tracking-wider mb-3">–¢–µ–æ—Ä—ñ—è</span>
                            <h1 class="text-2xl font-bold mb-4 leading-tight text-gray-900 dark:text-white">${lesson.title}</h1>
                            
                            <div class="prose dark:prose-invert prose-lg text-gray-600 dark:text-gray-300 leading-relaxed">
                                <p class="mb-4">
                                    <strong class="text-gray-900 dark:text-white">–û—Å–Ω–æ–≤–Ω–∞ –¥—É–º–∫–∞:</strong> –£ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Ä–æ–∑–≥–ª—è–¥–∞—î–º–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó ${lesson.title.toLowerCase()}. –í–∞–∂–ª–∏–≤–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Ü–µ –±–∞–∑–∞ –¥–ª—è –≤—Å—ñ—Ö –ø–æ–¥–∞–ª—å—à–∏—Ö —Ç–µ–º.
                                </p>
                                <ul class="space-y-3 my-6">
                                    <li class="flex items-start gap-3">
                                        <i class="fa-solid fa-check text-green-500 mt-1.5 flex-shrink-0"></i>
                                        <span>–ö–ª—é—á–æ–≤–∏–π –ø—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏.</span>
                                    </li>
                                    <li class="flex items-start gap-3">
                                        <i class="fa-solid fa-check text-green-500 mt-1.5 flex-shrink-0"></i>
                                        <span>–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è —Å—É—á–∞—Å–Ω–æ—ó IT-—Å—Ñ–µ—Ä–∏.</span>
                                    </li>
                                    <li class="flex items-start gap-3">
                                        <i class="fa-solid fa-check text-green-500 mt-1.5 flex-shrink-0"></i>
                                        <span>–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –∂–∏—Ç—Ç—ñ.</span>
                                    </li>
                                </ul>
                                <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border-l-4 border-yellow-400 text-sm">
                                    <strong>üí° –ó–∞–ø–∞–º'—è—Ç–∞–π:</strong> –ö–æ–º–ø‚Äô—é—Ç–µ—Ä–Ω–∞ –Ω–∞—É–∫–∞ ‚Äî —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –∫–æ–¥—É.
                                </div>
                            </div>
                        </div>

                        <!-- Interactive Quiz -->
                        <div class="bg-gray-50 dark:bg-slate-800 p-6 rounded-2xl border border-gray-100 dark:border-slate-700 shadow-sm mb-8">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-lg flex items-center gap-2">
                                    <span class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center text-primary"><i class="fa-solid fa-brain"></i></span>
                                    –ö–≤—ñ–∑
                                </h3>
                                <span class="text-xs font-bold text-gray-400 uppercase tracking-wider">1 –ø–∏—Ç–∞–Ω–Ω—è</span>
                            </div>
                            
                            <p class="text-sm font-medium mb-4 text-gray-700 dark:text-gray-300">–©–æ —î "–º–æ–∑–∫–æ–º" –∫–æ–º–ø'—é—Ç–µ—Ä–∞, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î –æ–±—á–∏—Å–ª–µ–Ω–Ω—è?</p>
                            
                            <div class="space-y-2.5" id="quizOptions">
                                <button onclick="checkAnswer(this, false)" class="w-full p-3.5 px-4 rounded-xl border-2 border-transparent bg-white dark:bg-slate-700 text-left hover:border-gray-200 dark:hover:border-gray-600 transition-all font-medium text-sm shadow-sm relative group">
                                    <span class="inline-block w-6 font-bold text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300">A</span>
                                    –ñ–æ—Ä—Å—Ç–∫–∏–π –¥–∏—Å–∫ (SSD)
                                </button>
                                <button onclick="checkAnswer(this, true, '${lessonId}')" class="w-full p-3.5 px-4 rounded-xl border-2 border-transparent bg-white dark:bg-slate-700 text-left hover:border-gray-200 dark:hover:border-gray-600 transition-all font-medium text-sm shadow-sm relative group">
                                    <span class="inline-block w-6 font-bold text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300">B</span>
                                    –ü—Ä–æ—Ü–µ—Å–æ—Ä (CPU)
                                </button>
                                <button onclick="checkAnswer(this, false)" class="w-full p-3.5 px-4 rounded-xl border-2 border-transparent bg-white dark:bg-slate-700 text-left hover:border-gray-200 dark:hover:border-gray-600 transition-all font-medium text-sm shadow-sm relative group">
                                    <span class="inline-block w-6 font-bold text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300">C</span>
                                    –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–º'—è—Ç—å (RAM)
                                </button>
                            </div>
                            
                            <div id="quizFeedback" class="hidden mt-4 p-3 rounded-xl text-center font-bold text-sm animate-bounce-in"></div>
                        </div>

                        <!-- Navigation Footer in Lesson -->
                        <div class="pb-safe flex justify-between items-center pt-4 border-t border-gray-100 dark:border-gray-800">
                             <button onclick="goBack()" class="px-4 py-2 text-gray-500 hover:text-gray-800 dark:hover:text-white font-medium transition-colors flex items-center gap-2">
                                <i class="fa-solid fa-arrow-left text-sm"></i> –ù–∞–∑–∞–¥
                             </button>
                             ${!isCompleted ? 
                                `<button id="markDoneBtn" onclick="markComplete('${lessonId}')" class="bg-dark dark:bg-white text-white dark:text-dark px-8 py-3 rounded-full font-bold shadow-xl shadow-gray-200 dark:shadow-none active:scale-95 transition-all flex items-center gap-2">
                                    –ó–∞–≤–µ—Ä—à–∏—Ç–∏ <i class="fa-solid fa-check"></i>
                                </button>` :
                                `<span class="px-6 py-2 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-full font-bold text-sm flex items-center gap-2">
                                    <i class="fa-solid fa-circle-check"></i> –ü—Ä–æ–π–¥–µ–Ω–æ
                                </span>`
                             }
                        </div>
                    </div>
                </div>
            `;
        }

        // --- ACTIONS ---

        window.toggleModule = (id) => {
            if (state.activeModuleId === id) {
                state.activeModuleId = null;
            } else {
                state.activeModuleId = id;
            }
            renderHome();
        };

        window.openLesson = (id) => {
            renderLessonView(id);
        };

        window.goBack = () => {
            renderHome();
        };

        // Handle browser back button
        backBtn.addEventListener('click', goBack);

        window.checkAnswer = (btn, isCorrect, lessonId) => {
            const parent = document.getElementById('quizOptions');
            const feedback = document.getElementById('quizFeedback');
            
            // Reset styles
            Array.from(parent.children).forEach(child => {
                child.classList.remove('ring-2', 'ring-green-500', 'ring-red-500', 'bg-green-50', 'bg-red-50', 'dark:bg-green-900/30', 'dark:bg-red-900/30');
                child.disabled = true;
                child.style.opacity = '0.7';
            });
            btn.style.opacity = '1';

            feedback.classList.remove('hidden');

            if (isCorrect) {
                btn.classList.add('ring-2', 'ring-green-500', 'bg-green-50', 'dark:bg-green-900/30');
                // Find icon inside button if we had one, or just text color
                btn.classList.add('text-green-700', 'dark:text-green-300');
                
                feedback.innerHTML = '<i class="fa-regular fa-face-smile text-xl mb-1 block"></i> –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –¢–∏ —Å—É–ø–µ—Ä!';
                feedback.classList.add('text-green-600', 'dark:text-green-400', 'bg-green-50', 'dark:bg-green-900/20');
                
                // Auto complete effect logic can go here
            } else {
                btn.classList.add('ring-2', 'ring-red-500', 'bg-red-50', 'dark:bg-red-900/30');
                btn.classList.add('text-red-700', 'dark:text-red-300');
                
                feedback.innerHTML = '<i class="fa-regular fa-face-frown text-xl mb-1 block"></i> –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑ –ø—ñ–∑–Ω—ñ—à–µ.';
                feedback.classList.add('text-red-600', 'dark:text-red-400', 'bg-red-50', 'dark:bg-red-900/20');
            }
        };

        window.markComplete = (lessonId) => {
            if (!state.completedLessons.includes(lessonId)) {
                state.completedLessons.push(lessonId);
                localStorage.setItem('cs_completed', JSON.stringify(state.completedLessons));
            }
            renderLessonView(lessonId); // Re-render to show "Done" status
        };

        // --- INIT ---
        initTheme();
        // Start with Landing Page
        renderLanding();

    </script>
</body>
</html>
