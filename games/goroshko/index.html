<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
<title>–ö–æ–¥–µ–≥–æ—Ä–æ—à–∫–æ ‚Äî –ê–∫–∞–¥–µ–º—ñ—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        fontFamily: {
          sans: ['Rubik','Montserrat','-apple-system','BlinkMacSystemFont','Segoe UI','Helvetica','Arial','sans-serif'],
          display: ['Montserrat','Rubik','sans-serif']
        },
        screens: { xs: '380px' }
      }
    }
  };
</script>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;900&family=Montserrat:wght@600;700;800;900&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
<link rel="modulepreload" href="js/game.js" />
<link rel="modulepreload" href="js/ui.js" />
<link rel="modulepreload" href="js/grid.js" />
<link rel="modulepreload" href="js/battle.js" />
<link rel="modulepreload" href="js/commands.js" />
<link rel="modulepreload" href="js/levels.js" />
<link rel="modulepreload" href="js/storage.js" />
<link rel="modulepreload" href="js/sound.js" />
<link rel="prefetch" href="leaderboard.html" as="document" />
<link rel="prefetch" href="story.html" as="document" />
<link rel="prefetch" href="algorithms.html" as="document" />
<link rel="stylesheet" href="css/styles.css" />
</head>
<body class="brawl-bg text-white min-h-screen font-sans">

<!-- –ï–∫—Ä–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
<div id="globalLoader" class="loading-screen" role="status" aria-live="polite">
  <div class="loading-screen__spinner" aria-hidden="true"></div>
  <div class="loading-screen__text">
    <p class="loading-screen__title">–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∞—Ä–µ–Ω—É...</p>
    <p class="loading-screen__subtitle">–ö–æ–¥–µ–≥–æ—Ä–æ—à–∫–æ –≤–∂–µ —Ä–æ–∑–º–∏–Ω–∞—î—Ç—å—Å—è!</p>
  </div>
</div>

<div class="game-shell flex flex-col min-h-screen">
  <header class="brawl-header">
    <div class="brawl-header__inner">
      <a href="index.html" class="brawl-header__brand">
        <span class="brawl-header__logo" aria-hidden="true">‚öîÔ∏è</span>
        <span>
          <span class="brawl-header__eyebrow">–ê–∫–∞–¥–µ–º—ñ—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤</span>
          <span class="brawl-header__title">–ö–æ–¥–µ–≥–æ—Ä–æ—à–∫–æ</span>
        </span>
      </a>

      <nav class="brawl-nav" aria-label="–û—Å–Ω–æ–≤–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è">
        <a class="brawl-nav__link" href="story.html">üìñ –õ–µ–≥–µ–Ω–¥–∞</a>
        <a class="brawl-nav__link" href="algorithms.html">üß† –ê–ª–≥–æ—Ä–∏—Ç–º–∏</a>
        <a class="brawl-nav__link" href="leaderboard.html">üèÜ –¢—É—Ä–Ω—ñ—Ä–∏</a>
        <a class="brawl-nav__link hidden" href="account.html" id="accountLink">‚≠ê –ê–∫–∞—É–Ω—Ç</a>
      </nav>

      <div class="brawl-header__actions">
        <div class="level-chip" aria-live="polite">
          <span class="level-chip__label">–†—ñ–≤–µ–Ω—å</span>
          <span class="level-chip__value" id="levelNum">1</span>
        </div>
        <button id="soundToggle" class="chip-button" aria-pressed="false" aria-label="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫">
          <i class="fas fa-volume-up" id="soundIcon" aria-hidden="true"></i>
        </button>
        <button id="fullscreenToggle" class="chip-button" aria-label="–ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π —Ä–µ–∂–∏–º">
          <i class="fas fa-expand" id="fullscreenIcon" aria-hidden="true"></i>
        </button>
        <div class="profile-dock">
          <div id="userProfile" class="profile-dock__user hidden">
            <div class="profile-dock__avatar" id="userAvatar" aria-hidden="true">üëæ</div>
            <div>
              <p class="profile-dock__name" id="userName">–ì—Ä–∞–≤–µ—Ü—å</p>
              <a class="profile-dock__account" href="account.html">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</a>
            </div>
            <button id="logoutBtn" class="profile-dock__logout hidden">–í–∏–π—Ç–∏</button>
          </div>
          <button id="loginBtn" class="btn-hero btn-hero--compact" type="button">
            <span class="btn-hero__glow" aria-hidden="true"></span>
            <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
            <span>–£–≤—ñ–π—Ç–∏</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="game-main flex-1">
    <div class="game-main__container">
      <div class="interface-grid">
        <!-- –ü–∞–Ω–µ–ª—å 1: –ö–∞—Ä—Ç–∞ -->
        <section class="interface-panel interface-panel--map" id="mapPanel" aria-label="–ö–∞—Ä—Ç–∞ –ø—Ä–∏–≥–æ–¥">
          <header class="interface-panel__header">
            <span class="interface-panel__icon">üó∫Ô∏è</span>
            <div>
              <h2 class="interface-panel__title">–ö–∞—Ä—Ç–∞ –±–∏—Ç–≤–∏</h2>
              <p class="interface-panel__subtitle">–°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π –∑–∞ –∞—Ä–µ–Ω–æ—é —Ç–∞ —Å–≤–æ—ó–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏</p>
            </div>
          </header>
          <div class="interface-panel__body">
            <div class="battle-map" id="grid" role="grid" aria-label="–°—ñ—Ç–∫–∞ –∫–∞—Ä—Ç–∏"></div>
            <div class="map-legend">
              <span>ü¶∏ –ì–µ—Ä–æ–π</span>
              <span>üíÄ –ú–æ–Ω—Å—Ç—Ä</span>
              <span>‚öîÔ∏è –ó–±—Ä–æ—è</span>
              <span>üõ°Ô∏è –ë—Ä–æ–Ω—è</span>
              <span>üß™ –ó—ñ–ª–ª—è</span>
              <span>üå≤ –ü–µ—Ä–µ—à–∫–æ–¥–∞</span>
            </div>
            <div class="stat-board">
              <div class="stat-board__item">
                <span class="stat-board__label">‚öîÔ∏è –°–∏–ª–∞</span>
                <span class="stat-board__value" id="damage">0</span>
              </div>
              <div class="stat-board__item">
                <span class="stat-board__label">üõ°Ô∏è –ó–∞—Ö–∏—Å—Ç</span>
                <span class="stat-board__value" id="armor">0</span>
              </div>
              <div class="stat-board__item">
                <span class="stat-board__label">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤'—è</span>
                <span class="stat-board__value" id="health">100</span>
              </div>
              <div class="stat-board__item">
                <span class="stat-board__label">ü•á –ó–æ–ª–æ—Ç–æ</span>
                <span class="stat-board__value" id="parGold">‚Äî</span>
              </div>
            </div>
          </div>
        </section>

        <!-- –ü–∞–Ω–µ–ª—å 2: –ó–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –∫–æ–º–∞–Ω–¥–∏ -->
        <section class="interface-panel interface-panel--commands" aria-label="–ó–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –∫–æ–º–∞–Ω–¥–∏">
          <header class="interface-panel__header">
            <span class="interface-panel__icon">üéØ</span>
            <div>
              <h2 class="interface-panel__title">–ó–∞–≤–¥–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è</h2>
              <p class="interface-panel__subtitle" id="levelDesc">–î—ñ–π–¥–∏ –¥–æ –û–ø—É–¥–∞–ª–∞!</p>
            </div>
          </header>
          <div class="interface-panel__body">
            <p class="panel-hint">–î–æ–¥–∞–≤–∞–π –∫–æ–º–∞–Ω–¥–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è–º –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è–º —É –ø–æ–ª–µ –∞–ª–≥–æ—Ä–∏—Ç–º—É.</p>
            <div id="commandPalette" class="command-palette" role="listbox">
              <div class="command-palette__section" aria-hidden="true">–ö—Ä–æ–∫–∏ —Ä—É—Ö—É</div>
              <button type="button" class="command-tile hidden-by-level" data-visible-from="0" data-command-type="move" data-direction="right" draggable="true">
                <span class="command-tile__icon"><i class="fas fa-arrow-right"></i></span>
                <span class="command-tile__label">–í–ø—Ä–∞–≤–æ</span>
              </button>
              <button type="button" class="command-tile hidden-by-level" data-visible-from="1" data-command-type="move" data-direction="up" draggable="true">
                <span class="command-tile__icon"><i class="fas fa-arrow-up"></i></span>
                <span class="command-tile__label">–í–≥–æ—Ä—É</span>
              </button>
              <button type="button" class="command-tile hidden-by-level" data-visible-from="1" data-command-type="move" data-direction="down" draggable="true">
                <span class="command-tile__icon"><i class="fas fa-arrow-down"></i></span>
                <span class="command-tile__label">–í–Ω–∏–∑</span>
              </button>
              <button type="button" class="command-tile hidden-by-level" data-visible-from="1" data-command-type="move" data-direction="left" draggable="true">
                <span class="command-tile__icon"><i class="fas fa-arrow-left"></i></span>
                <span class="command-tile__label">–í–ª—ñ–≤–æ</span>
              </button>
              <div class="command-palette__section" aria-hidden="true">–ü–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è</div>
              <button type="button" class="command-tile command-tile--loop hidden-by-level" data-visible-from="7" data-command-type="loop" draggable="true">
                <span class="command-tile__icon"><i class="fas fa-redo"></i></span>
                <span class="command-tile__label">–¶–∏–∫–ª</span>
                <span class="command-tile__note">–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –∫–æ–º–∞–Ω–¥–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—É</span>
              </button>
            </div>
          </div>
        </section>

        <!-- –ü–∞–Ω–µ–ª—å 3: –ü–æ–ª–µ –∞–ª–≥–æ—Ä–∏—Ç–º—É -->
        <section class="interface-panel interface-panel--program" id="programPanel" aria-label="–ü–æ–ª–µ –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—É">
          <header class="interface-panel__header">
            <span class="interface-panel__icon">üíª</span>
            <div>
              <h2 class="interface-panel__title">–ú—ñ–π –∞–ª–≥–æ—Ä–∏—Ç–º</h2>
              <p class="interface-panel__subtitle">–†–æ–∑—Å—Ç–∞–≤ –±–ª–æ–∫–∏ —Ç–∞ —Å—Ç–∞—Ä—Ç—É–π —É –±—ñ–π</p>
            </div>
          </header>
          <div class="interface-panel__body interface-panel__body--stacked">
            <div class="workspace-intro">–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –±–ª–æ–∫–∏ —Å—é–¥–∏ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –Ω–∏—Ö —É –ø–∞–Ω–µ–ª—ñ –∫–æ–º–∞–Ω–¥.</div>
            <div class="workspace-board" id="commandList" aria-live="polite"></div>
            <div class="workspace-controls">
              <button class="btn-hero" id="btnRun" type="button">
                <span class="btn-hero__glow" aria-hidden="true"></span>
                <i class="fas fa-play"></i>
                <span>–°—Ç–∞—Ä—Ç</span>
              </button>
              <button class="btn-hero btn-hero--compact" id="btnStep" type="button">
                <span class="btn-hero__glow" aria-hidden="true"></span>
                <i class="fas fa-shoe-prints"></i>
                <span>–ö—Ä–æ–∫</span>
              </button>
              <button class="btn-hero btn-hero--danger" id="btnClear" type="button">
                <span class="btn-hero__glow" aria-hidden="true"></span>
                <i class="fas fa-trash"></i>
                <span>–û—á–∏—Å—Ç–∏—Ç–∏</span>
              </button>
            </div>
            <div class="message hidden" id="message" role="status" aria-live="polite"></div>
          </div>
        </section>
      </div>

      <section class="battle-stage hidden" id="battleScene" aria-label="–°—Ü–µ–Ω–∞ –±–æ—é">
        <h2 class="battle-stage__title">–ë–∏—Ç–≤–∞ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è!</h2>
        <div class="battle-stage__grid">
          <div class="battle-card">
            <div class="battle-card__avatar">ü¶∏</div>
            <p class="battle-card__name">–ö–æ–¥–µ–≥–æ—Ä–æ—à–∫–æ</p>
            <p class="battle-card__stat">‚ù§Ô∏è <span id="heroHealthText">100</span></p>
            <div class="battle-card__bar">
              <div class="battle-card__bar-fill battle-card__bar-fill--hero" id="heroHealthBar"></div>
            </div>
          </div>
          <div class="battle-card battle-card--vs">
            <div class="battle-card__avatar" id="monsterIcon">üíÄ</div>
            <p class="battle-card__name" id="monsterName">–ú–æ–Ω—Å—Ç—Ä</p>
            <p class="battle-card__stat">‚ù§Ô∏è <span id="monsterHealthText">50</span></p>
            <div class="battle-card__bar">
              <div class="battle-card__bar-fill battle-card__bar-fill--monster" id="monsterHealthBar"></div>
            </div>
          </div>
        </div>
        <div class="battle-log" id="battleLog" aria-live="polite"></div>
      </section>
    </div>
  </main>
</div>

<div id="tutorialModalBackdrop" class="modal-backdrop hidden" aria-hidden="true"></div>
<div id="tutorialModal" class="modal-card hidden" role="dialog" aria-modal="true" aria-labelledby="tutorialTitle">
  <div class="modal-card__header">
    <h2 id="tutorialTitle">üîÅ –ù–æ–≤–∞ —Å–∏–ª–∞: —Ü–∏–∫–ª–∏!</h2>
  </div>
  <div class="modal-card__body">
    <p>–¶–∏–∫–ª–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –Ω–∞–±—ñ—Ä –∫–æ–º–∞–Ω–¥ –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ ‚Äî –µ–∫–æ–Ω–æ–º–∏–º–æ –±–ª–æ–∫–∏ —Ç–∞ —á–∞—Å.</p>
    <ul>
      <li>–î–æ–¥–∞–π –±–ª–æ–∫ ¬´–¶–∏–∫–ª¬ª –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è–º –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è–º.</li>
      <li>–ü–µ—Ä–µ–Ω–µ—Å–∏ –∫–æ–º–∞–Ω–¥–∏ —É —Å–≤—ñ—Ç–ª—É –æ–±–ª–∞—Å—Ç—å –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ü–∏–∫–ª—É.</li>
      <li>–í–∫–∞–∂–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω—å —Ç–∞ –∑–∞–ø—É—Å–∫–∞–π –∞–ª–≥–æ—Ä–∏—Ç–º.</li>
    </ul>
  </div>
  <div class="modal-card__footer">
    <button class="btn-hero" id="tutorialCloseBtn" type="button">
      <span class="btn-hero__glow" aria-hidden="true"></span>
      <span>–ó—Ä–æ–∑—É–º—ñ–ª–æ!</span>
    </button>
  </div>
</div>

<div id="victoryModalBackdrop" class="modal-backdrop hidden" aria-hidden="true"></div>
<div id="victoryModal" class="modal-card modal-card--victory hidden" role="dialog" aria-modal="true" aria-labelledby="victoryTitle">
  <div class="modal-card__header">
    <h2 id="victoryTitle">üèÜ –ü–µ—Ä–µ–º–æ–≥–∞!</h2>
    <p id="victoryMedal">ü•á –§–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω–æ!</p>
  </div>
  <div class="modal-card__body">
    <p class="modal-card__stat">–ë–ª–æ–∫—ñ–≤: <span id="victoryBlockCount">0</span></p>
  </div>
  <div class="modal-card__footer">
    <button class="btn-hero" id="victoryNextBtn" type="button">
      <span class="btn-hero__glow" aria-hidden="true"></span>
      <i class="fas fa-forward"></i>
      <span>–ù–∞—Å—Ç—É–ø–Ω–∏–π —Ä—ñ–≤–µ–Ω—å</span>
    </button>
  </div>
</div>

<!-- –ü—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω—å (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ JS –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è account.html) -->
<div id="achievementList" class="hidden"></div>
<span id="achCompleted" class="hidden"></span>
<span id="achAttempts" class="hidden"></span>
<span id="achGold" class="hidden"></span>
<span id="achSilver" class="hidden"></span>
<span id="achBronze" class="hidden"></span>

<script type="module" src="js/main.js"></script>
</body>
</html>
