<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
<title>–ö–æ—Ç–∏–≥–æ—Ä–æ—à–∫–æ ‚Äî –ù–∞–≤—á–∞–ª—å–Ω–∞ –≥—Ä–∞ –∑ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = { 
  theme: { 
    extend: { 
      fontFamily: { 
        sans: ['Roboto','-apple-system','BlinkMacSystemFont','Segoe UI','Helvetica','Arial','sans-serif'], 
        display: ['Open Sans','Roboto','sans-serif'] 
      }, 
      screens: { xs: '380px' } 
    } 
  } 
};
</script>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&family=Open+Sans:wght@600;700;800&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
<link rel="stylesheet" href="css/styles.css" />
</head>
<body class="bg-gradient-to-br from-blue-900 to-blue-700 min-h-screen p-2 xs:p-3 flex justify-center items-start font-sans">

<div class="container mx-auto max-w-6xl w-full">
  <!-- –•–µ–¥–µ—Ä –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Ä—ñ–≤–µ–Ω—å -->
  <header class="bg-white/90 backdrop-blur rounded-2xl p-3 md:p-4 shadow-2xl w-full mt-2">
    <div class="flex justify-between items-center gap-x-4">
      
      <div class="flex-shrink-0">
        <h1 class="font-display text-2xl xs:text-3xl md:text-4xl text-yellow-500 drop-shadow-lg leading-tight">ü¶∏ –ö–æ—Ç–∏–≥–æ—Ä–æ—à–∫–æ üêâ</h1>
        <p class="text-gray-700 text-xs xs:text-sm md:text-base mt-1 hidden sm:block">–°—Ç–≤–æ—Ä–∏ –∞–ª–≥–æ—Ä–∏—Ç–º —ñ –∑–¥–æ–ª–∞–π –º–æ–Ω—Å—Ç—Ä—ñ–≤!</p>
        <div class="flex gap-3 mt-2">
          <a href="story.html" class="text-blue-600 hover:text-blue-800 text-sm underline">üìñ –õ–µ–≥–µ–Ω–¥–∞</a>
          <a href="algorithms.html" class="text-blue-600 hover:text-blue-800 text-sm underline">üß† –ê–ª–≥–æ—Ä–∏—Ç–º–∏</a>
        </div>
      </div>

      <div class="flex items-center gap-x-2 sm:gap-x-4">
        <section class="level-info bg-gradient-to-br from-purple-600 to-indigo-700 p-2.5 md:p-3 rounded-2xl text-white shadow-lg">
          <div class="flex items-center justify-between gap-2 mb-2">
            <h2 class="font-display text-lg md:text-2xl">üè∞ –†—ñ–≤–µ–Ω—å <span id="levelNum">1</span></h2>
            <div class="flex gap-1.5">
              <button id="soundToggle" class="btn-3d text-white rounded-lg p-1.5 text-base bg-white/20 hover:bg-white/30" aria-pressed="false" aria-label="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫" style="--shadow-color:rgba(0,0,0,.3)">
                <i class="fas fa-volume-up w-4 h-4" id="soundIcon" aria-hidden="true"></i>
              </button>
              <button id="fullscreenToggle" class="btn-3d text-white rounded-lg p-1.5 text-base bg-white/20 hover:bg-white/30" aria-label="–ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π —Ä–µ–∂–∏–º" style="--shadow-color:rgba(0,0,0,.3)">
                <i class="fas fa-expand w-4 h-4" id="fullscreenIcon" aria-hidden="true"></i>
              </button>
            </div>
          </div>
          <p class="level-desc text-xs md:text-sm mb-2 text-center" id="levelDesc"></p>
          <div class="stats-bar flex gap-1.5 justify-center flex-wrap text-xs md:text-sm">
            <div class="stat bg-white/20 rounded-lg px-2 py-1 flex items-center gap-1">‚öîÔ∏è <span id="damage">0</span></div>
            <div class="stat bg-white/20 rounded-lg px-2 py-1 flex items-center gap-1">üõ°Ô∏è <span id="armor">0</span></div>
            <div class="stat bg-white/20 rounded-lg px-2 py-1 flex items-center gap-1">‚ù§Ô∏è <span id="health">100</span></div>
            <div class="stat bg-white/20 rounded-lg px-2 py-1 flex items-center gap-1 font-display">üéØ <span id="parGold">?</span>ü•á</div>
          </div>
        </section>

        <div class="flex flex-col items-center gap-y-2">
            <div id="userProfile" class="hidden bg-white/80 backdrop-blur rounded-xl p-2 shadow-md w-full">
                <div class="flex items-center gap-2">
                    <div id="userAvatar" class="text-2xl">üë®‚Äçüíª</div>
                    <div>
                        <p id="userName" class="font-bold text-gray-800 text-sm leading-tight">–ì—Ä–∞–≤–µ—Ü—å</p>
                        <div class="flex gap-2 text-xs">
                            <a href="leaderboard.html" class="text-blue-600 hover:underline">üèÜ –†–µ–π—Ç–∏–Ω–≥</a>
                            <button id="logoutBtn" class="text-red-600 hover:underline hidden">–í–∏–π—Ç–∏</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="loginBtn" class="btn-3d bg-green-500 text-white px-4 py-2 rounded-lg font-bold text-sm w-full [--shadow-color:theme(colors.green.700)] hover:bg-green-400">
                <i class="fas fa-sign-in-alt mr-1"></i>–£–≤—ñ–π—Ç–∏
            </button>
        </div>
      </div>

    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–∞ —ñ–≥—Ä–æ–≤–∞ –∑–æ–Ω–∞ -->
  <main class="bg-white rounded-2xl p-3 md:p-6 shadow-2xl w-full my-3">
    <div class="game-area grid grid-cols-1 md:grid-cols-[1.15fr_1fr] gap-3 md:gap-6">
      
      <!-- –ö–∞—Ä—Ç–∞ –≥—Ä–∏ -->
      <section class="grid-container bg-gray-50 rounded-2xl p-2.5 md:p-4 shadow-inner" aria-label="–ö–∞—Ä—Ç–∞ –ø—Ä–∏–≥–æ–¥">
        <h3 class="font-display text-xl md:text-2xl text-center text-indigo-600 mb-2 md:mb-3">üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ø—Ä–∏–≥–æ–¥</h3>
        <div class="mx-auto" id="grid" role="grid" aria-label="–°—ñ—Ç–∫–∞ –∫–∞—Ä—Ç–∏"></div>
        <div class="legend grid grid-cols-2 sm:grid-cols-3 gap-1.5 text-xs mt-2 md:mt-3">
          <div class="legend-item flex items-center gap-1 bg-white p-1 rounded-md shadow-sm">ü¶∏ –ö–æ—Ç–∏–≥–æ—Ä–æ—à–∫–æ</div>
          <div class="legend-item flex items-center gap-1 bg-white p-1 rounded-md shadow-sm">üíÄ –ú–æ–Ω—Å—Ç—Ä</div>
          <div class="legend-item flex items-center gap-1 bg-white p-1 rounded-md shadow-sm">‚öîÔ∏è –ó–±—Ä–æ—è</div>
          <div class="legend-item flex items-center gap-1 bg-white p-1 rounded-md shadow-sm">üõ°Ô∏è –ë—Ä–æ–Ω—è</div>
          <div class="legend-item flex items-center gap-1 bg-white p-1 rounded-md shadow-sm">üß™ –ó—ñ–ª–ª—è</div>
          <div class="legend-item flex items-center gap-1 bg-white p-1 rounded-md shadow-sm">üå≤ –ü–µ—Ä–µ—à–∫–æ–¥–∞</div>
        </div>
      </section>

      <!-- –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º—É -->
      <aside class="commands-area bg-gray-50 rounded-2xl p-2.5 md:p-4 shadow-inner flex flex-col" aria-label="–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º—É">
        <h3 class="font-display text-xl md:text-2xl text-center text-indigo-600 mb-2 md:mb-3">üìú –¢–≤–æ—ó –ö–æ–º–∞–Ω–¥–∏</h3>
        
        <div class="command-buttons grid grid-cols-4 gap-1.5 sm:gap-2.5 mb-3">
          <button class="cmd-btn btn-3d font-display text-white rounded-xl px-2 py-2 text-sm md:text-lg bg-blue-500 [--shadow-color:theme(colors.blue.700)] hover:bg-blue-400 hidden-by-level min-h-[48px] flex flex-col items-center justify-center gap-0.5" id="btnUp">
            <i class="fas fa-arrow-up text-lg md:text-xl"></i><span class="text-xs md:text-sm">–í–≥–æ—Ä—É</span>
          </button>
          <button class="cmd-btn btn-3d font-display text-white rounded-xl px-2 py-2 text-sm md:text-lg bg-blue-500 [--shadow-color:theme(colors.blue.700)] hover:bg-blue-400 hidden-by-level min-h-[48px] flex flex-col items-center justify-center gap-0.5" id="btnDown">
            <i class="fas fa-arrow-down text-lg md:text-xl"></i><span class="text-xs md:text-sm">–í–Ω–∏–∑</span>
          </button>
          <button class="cmd-btn btn-3d font-display text-white rounded-xl px-2 py-2 text-sm md:text-lg bg-blue-500 [--shadow-color:theme(colors.blue.700)] hover:bg-blue-400 hidden-by-level min-h-[48px] flex flex-col items-center justify-center gap-0.5" id="btnLeft">
            <i class="fas fa-arrow-left text-lg md:text-xl"></i><span class="text-xs md:text-sm">–õ—ñ–≤–æ—Ä—É—á</span>
          </button>
          <button class="cmd-btn btn-3d font-display text-white rounded-xl px-2 py-2 text-sm md:text-lg bg-blue-500 [--shadow-color:theme(colors.blue.700)] hover:bg-blue-400 hidden-by-level min-h-[48px] flex flex-col items-center justify-center gap-0.5" id="btnRight">
            <i class="fas fa-arrow-right text-lg md:text-xl"></i><span class="text-xs md:text-sm">–ü—Ä–∞–≤–æ—Ä—É—á</span>
          </button>
          <button class="cmd-btn btn-3d loop-btn font-display text-white rounded-xl px-2 py-2 text-sm md:text-lg col-span-2 bg-yellow-500 [--shadow-color:theme(colors.yellow.700)] hover:bg-yellow-400 hidden-by-level min-h-[44px]" id="btnLoop">
            <i class="fas fa-redo mr-1"></i>–ü–æ—á–∞—Ç–∏ –¶–∏–∫–ª
          </button>
          <button class="cmd-btn btn-3d font-display text-white rounded-xl px-2 py-2 text-sm md:text-lg col-span-2 hidden-by-level min-h-[44px]" id="btnRoot">
            <i class="fas fa-sign-out-alt mr-1"></i>–í–∏–π—Ç–∏ –∑ —Ü–∏–∫–ª—É
          </button>
        </div>

        <h3 class="font-display text-base md:text-xl text-center text-indigo-600 mb-2">üíª –¢–≤—ñ–π –∞–ª–≥–æ—Ä–∏—Ç–º:</h3>
        <div class="command-list bg-white border-2 border-indigo-200 rounded-lg p-2 min-h-[120px] max-h-[35vh] overflow-y-auto mb-3 flex-grow" id="commandList" aria-live="polite"></div>

        <div class="controls-sticky grid grid-cols-2 md:flex gap-2 sm:gap-2.5 pt-2">
          <button class="control-btn btn-3d font-display text-white rounded-xl py-2.5 text-base md:text-xl md:flex-1 bg-green-500 [--shadow-color:theme(colors.green.700)] hover:bg-green-400 min-h-[44px]" id="btnRun">
            <i class="fas fa-play mr-1 md:mr-2"></i>–°—Ç–∞—Ä—Ç
          </button>
          <button class="control-btn btn-3d font-display text-white rounded-xl py-2.5 text-base md:text-xl md:flex-1 bg-red-500 [--shadow-color:theme(colors.red.700)] hover:bg-red-400 min-h-[44px]" id="btnClear">
            <i class="fas fa-trash mr-1 md:mr-2"></i>–û—á–∏—Å—Ç–∏—Ç–∏
          </button>
        </div>
      </aside>
    </div>

    <!-- –°—Ü–µ–Ω–∞ –±–æ—é -->
    <section class="battle-scene hidden bg-gradient-to-br from-gray-800 to-black text-white rounded-2xl p-4 mt-4 md:mt-6" id="battleScene" aria-label="–°—Ü–µ–Ω–∞ –±–æ—é">
      <h2 class="font-display text-2xl md:text-3xl text-center text-yellow-400 mb-4">üí• –ë–Ü–ô! üí•</h2>
      <div class="battle-characters flex justify-around items-center flex-wrap gap-4 mb-4">
        <div class="character text-center w-32 md:w-36">
          <div class="character-icon text-5xl md:text-7xl">ü¶∏</div>
          <div class="font-bold text-base md:text-lg"><strong>–ö–æ—Ç–∏–≥–æ—Ä–æ—à–∫–æ</strong></div>
          <div class="text-xs md:text-sm">‚ù§Ô∏è <span id="heroHealthText">100</span></div>
          <div class="health-bar bg-gray-600 h-4 md:h-5 rounded-full overflow-hidden mt-1 shadow-inner">
            <div class="health-fill hero-health h-full rounded-full bg-gradient-to-r from-green-400 to-green-600 transition-all duration-500" id="heroHealthBar" style="width:100%"></div>
          </div>
        </div>
        <div class="text-3xl md:text-5xl font-display text-yellow-400">‚ö°</div>
        <div class="character text-center w-32 md:w-36">
          <div class="character-icon text-5xl md:text-7xl" id="monsterIcon">üíÄ</div>
          <div class="font-bold text-base md:text-lg"><strong id="monsterName">–ú–æ–Ω—Å—Ç—Ä</strong></div>
          <div class="text-xs md:text-sm">‚ù§Ô∏è <span id="monsterHealthText">50</span></div>
          <div class="health-bar bg-gray-600 h-4 md:h-5 rounded-full overflow-hidden mt-1 shadow-inner">
            <div class="health-fill h-full rounded-full bg-gradient-to-r from-red-400 to-red-600 transition-all duration-500" id="monsterHealthBar" style="width:100%"></div>
          </div>
        </div>
      </div>
      <div class="battle-log bg-white/10 rounded-lg p-3 min-h-[80px] max-h-[180px] overflow-y-auto text-xs md:text-sm text-left font-mono" id="battleLog" aria-live="polite"></div>
    </section>

    <div class="message hidden text-center p-2.5 rounded-lg mt-3 md:mt-6 text-sm md:text-lg font-bold" id="message" role="status" aria-live="polite"></div>
  </main>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ -->
<div id="tutorialModalBackdrop" class="fixed inset-0 bg-black/60 z-40 hidden" aria-hidden="true"></div>
<div id="tutorialModal" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-4 md:p-6 rounded-2xl shadow-2xl z-50 w-11/12 max-w-md hidden" role="dialog" aria-modal="true" aria-labelledby="tutorialTitle">
  <h2 id="tutorialTitle" class="font-display text-2xl md:text-3xl text-yellow-500 text-center mb-3 md:mb-4">üîÅ –ù–æ–≤–∞ –°–∏–ª–∞: –¶–ò–ö–õ–ò! üîÅ</h2>
  <p class="text-gray-700 mb-3 md:mb-4 text-center text-sm md:text-base">–¶–∏–∫–ª–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –¥–µ–∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤. –¶–µ –µ–∫–æ–Ω–æ–º–∏—Ç—å –±–ª–æ–∫–∏!</p>
  <div class="bg-gray-100 rounded-lg p-2.5 md:p-3 mb-4 md:mb-5 text-gray-800 text-sm md:text-base">
    <p class="font-medium mb-1">1. –ù–∞—Ç–∏—Å–Ω–∏ <strong class="text-yellow-600">¬´–ü–æ—á–∞—Ç–∏ –¶–∏–∫–ª¬ª</strong>.</p>
    <p class="font-medium mb-1">2. –î–æ–¥–∞–π –∫–æ–º–∞–Ω–¥–∏, —è–∫—ñ —Ö–æ—á–µ—à –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏.</p>
    <p class="font-medium">3. –ù–∞—Ç–∏—Å–Ω–∏ <strong class="text-red-500">¬´–í–∏–π—Ç–∏ –∑ —Ü–∏–∫–ª—É¬ª</strong>.</p>
  </div>
  <button class="btn-3d w-full font-display text-white rounded-xl p-2.5 md:p-3 text-base md:text-lg bg-green-500 [--shadow-color:theme(colors.green.700)] hover:bg-green-400" id="tutorialCloseBtn">–ó—Ä–æ–∑—É–º—ñ–ª–æ!</button>
</div>

<div id="victoryModalBackdrop" class="fixed inset-0 bg-black/60 z-40 hidden" aria-hidden="true"></div>
<div id="victoryModal" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-4 md:p-8 rounded-2xl shadow-2xl z-50 w-11/12 max-w-lg hidden" role="dialog" aria-modal="true" aria-labelledby="victoryTitle">
  <div class="bg-gradient-to-r from-green-400 to-green-500 text-white p-3 md:p-4 rounded-xl mb-4 md:mb-6 text-center">
    <div class="flex items-center justify-center gap-2 md:gap-3 mb-2">
      <span class="text-2xl md:text-3xl" aria-hidden="true">üéâ</span>
      <h2 id="victoryTitle" class="font-display text-xl md:text-3xl">–ü–µ—Ä–µ–º–æ–≥–∞!</h2>
      <span class="text-2xl md:text-3xl" aria-hidden="true">üèÜ</span>
    </div>
    <div class="text-base md:text-xl font-bold" id="victoryStats">–ë–ª–æ–∫—ñ–≤: <span id="victoryBlockCount">0</span></div>
    <div class="text-sm md:text-base mt-1" id="victoryMedal">ü•á (–ó–æ–ª–æ—Ç–æ!)</div>
  </div>
  <div class="text-center">
    <button class="btn-3d font-display text-gray-800 rounded-xl p-3 md:p-4 text-lg md:text-xl bg-yellow-400 [--shadow-color:theme(colors.yellow.600)] hover:bg-yellow-300 w-full" id="victoryNextBtn">
      <i class="fas fa-forward mr-2" aria-hidden="true"></i>–ù–∞—Å—Ç—É–ø–Ω–∏–π —Ä—ñ–≤–µ–Ω—å
    </button>
  </div>
</div>

<!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤ JS -->
<script type="module" src="js/main.js"></script>
</body>
</html>
