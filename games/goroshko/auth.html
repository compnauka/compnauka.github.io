<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–í—Ö—ñ–¥ ‚Äî –ö–æ—Ç–∏–≥–æ—Ä–æ—à–∫–æ</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;700;900&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
<link rel="stylesheet" href="css/styles.css" />
</head>
<body class="brawl-bg min-h-screen flex flex-col items-center justify-center p-4">
  <div class="auth-frame">
    <header class="auth-frame__header">
      <div class="auth-frame__icon" aria-hidden="true">üõ°Ô∏è</div>
      <div>
        <p class="auth-frame__eyebrow">–û—Å–≤—ñ—Ç–Ω—è –±–∏—Ç–≤–∞ –∑–∞ –∑–Ω–∞–Ω–Ω—è</p>
        <h1 class="auth-frame__title">–ö–æ—Ç–∏–≥–æ—Ä–æ—à–∫–æ</h1>
      </div>
    </header>

    <section class="auth-frame__body">
      <h2 class="auth-frame__subtitle">–£–≤—ñ–π–¥–∏, —â–æ–± –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è</h2>
      <button id="googleLogin" class="btn-hero w-full" type="button">
        <span class="btn-hero__glow" aria-hidden="true"></span>
        <i class="fab fa-google"></i>
        <span>–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –∑ Google</span>
      </button>
      <div id="authMessage" class="auth-frame__message hidden" role="status" aria-live="polite"></div>
      <p class="auth-frame__hint">
        –í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google –¥–æ–∑–≤–æ–ª—è—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ —Ä—ñ–≤–Ω—ñ, –º–µ–¥–∞–ª—ñ —Ç–∞ —É—á–∞—Å—Ç—å —É —Ç—É—Ä–Ω—ñ—Ä–∞—Ö –Ω–∞ –±—É–¥—å-—è–∫–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó.
      </p>
    </section>

    <footer class="auth-frame__footer">
      <a class="auth-frame__link" href="index.html">
        <i class="fas fa-arrow-left" aria-hidden="true"></i>
        –ù–∞–∑–∞–¥ –¥–æ –≥—Ä–∏
      </a>
    </footer>
  </div>

  <script type="module">
    import { authManager } from './js/auth.js';

    authManager.init();

    const googleBtn = document.getElementById('googleLogin');
    const message = document.getElementById('authMessage');

    authManager.onAuthChange((user) => {
      if (user) {
        showMessage('–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –Ω–∞–∑–∞–¥! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –¥–æ –ø—Ä–∏–≥–æ–¥...', 'success');
        setTimeout(() => {
          window.location.href = 'index.html';
        }, 600);
      }
    });

    googleBtn.addEventListener('click', async () => {
      setLoading(true);
      showMessage('–í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –ø–æ—Ä—Ç–∞–ª Google...', 'info');

      const result = await authManager.loginWithGoogle();
      if (!result.success) {
        showMessage(result.error, 'error');
        setLoading(false);
      }
    });

    function setLoading(isLoading) {
      googleBtn.disabled = isLoading;
      googleBtn.classList.toggle('is-loading', isLoading);
    }

    function showMessage(text, type = 'info') {
      const styles = {
        success: 'auth-frame__message--success',
        error: 'auth-frame__message--error',
        info: 'auth-frame__message--info'
      };

      message.textContent = text;
      message.className = `auth-frame__message ${styles[type] || styles.info}`;
      message.classList.remove('hidden');
    }
  </script>
</body>
</html>
