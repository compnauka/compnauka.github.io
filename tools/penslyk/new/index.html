<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>–ü–µ–Ω–∑–ª–∏–∫ | –ì—Ä–∞—Ñ—ñ—á–Ω–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –¥—ñ—Ç–µ–π</title>

  <!-- Fonts + Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- (Optional) Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8T05K3NGT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-N8T05K3NGT');
  </script>
  <script async src="https://plausible.io/js/pa-kBgdFkemKx0WM6VJQvasn.js"></script>
  <script>
    window.plausible = window.plausible || function () { (plausible.q = plausible.q || []).push(arguments) },
      plausible.init = plausible.init || function (i) { plausible.o = i || {} };
    plausible.init();
  </script>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind config (AFTER CDN) -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Nunito', 'sans-serif'] },
          colors: {
            'neo-yellow': '#FFDE00',
            'neo-blue': '#3B82F6',
            'neo-red': '#FF4D4D',
            'neo-green': '#00E055',
            'neo-purple': '#A855F7',
            'neo-dark': '#1a1a1a',
            'dark-bg': '#121212',
            'dark-card': '#1e1e1e',
          },
          boxShadow: {
            'neo': '4px 4px 0px 0px #000000',
            'neo-sm': '2px 2px 0px 0px #000000',
            'neo-lg': '8px 8px 0px 0px #000000',
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="style.css" />
</head>

<body
  class="bg-neo-yellow dark:bg-dark-bg flex flex-col selection:bg-neo-purple selection:text-white transition-colors duration-300">

  <!-- HEADER -->
  <header id="app-header"
    class="sticky top-0 flex-none bg-neo-yellow dark:bg-dark-card border-b-4 border-black p-3 flex justify-between items-center z-50">
    <div class="flex items-center gap-4 select-none">
      <div
        class="w-12 h-12 sm:w-14 sm:h-14 bg-neo-purple border-4 border-black rounded-2xl flex items-center justify-center text-white text-xl sm:text-2xl shadow-neo-sm transform rotate-2">
        <i class="fas fa-paintbrush"></i>
      </div>
      <div class="leading-tight">
        <h1 class="text-xl sm:text-2xl font-black uppercase dark:text-white tracking-tight">–ü–µ–Ω–∑–ª–∏–∫</h1>
      </div>
    </div>

    <div class="flex gap-2 sm:gap-3">
      <button onmousedown="event.preventDefault()" onclick="App.toggleTheme()"
        class="neo-btn bg-gray-700 text-white w-12 h-12 sm:w-14 sm:h-14" title="–¢–µ–º–∞" aria-label="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">
        <i id="theme-icon" class="fas fa-moon text-lg sm:text-xl"></i>
      </button>

      <button onmousedown="event.preventDefault()" onclick="App.undo()"
        class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14" title="–°–∫–∞—Å—É–≤–∞—Ç–∏" aria-label="–°–∫–∞—Å—É–≤–∞—Ç–∏ (Undo)">
        <i class="fas fa-undo text-lg sm:text-xl"></i>
      </button>

      <button onmousedown="event.preventDefault()" onclick="App.redo()"
        class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏" aria-label="–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ (Redo)">
        <i class="fas fa-redo text-lg sm:text-xl"></i>
      </button>

      <label class="neo-btn bg-orange-400 text-black w-12 h-12 sm:w-14 sm:h-14 cursor-pointer" title="–í—ñ–¥–∫—Ä–∏—Ç–∏"
        aria-label="–í—ñ–¥–∫—Ä–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è">
        <i class="fas fa-folder-open text-lg sm:text-xl"></i>
        <input id="file-input" type="file" accept="image/*" class="hidden" />
      </label>

      <button onmousedown="event.preventDefault()" onclick="App.askClear()"
        class="neo-btn bg-neo-red text-white w-12 h-12 sm:w-14 sm:h-14" title="–û—á–∏—Å—Ç–∏—Ç–∏" aria-label="–û—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ª–æ—Ç–Ω–æ">
        <i class="fas fa-trash-alt text-lg sm:text-xl"></i>
      </button>

      <button onmousedown="event.preventDefault()" onclick="App.save()"
        class="neo-btn bg-neo-green px-4 sm:px-6 h-12 sm:h-14 gap-2 text-sm sm:text-base" aria-label="–ó–±–µ—Ä–µ–≥—Ç–∏ –º–∞–ª—é–Ω–æ–∫">
        <i class="fas fa-save text-lg sm:text-xl"></i>
        <span class="hidden md:inline font-black uppercase">–ó–±–µ—Ä–µ–≥—Ç–∏</span>
      </button>
    </div>
  </header>

  <!-- TOOLS TOOLBAR (purple) -->
  <div id="tools-toolbar"
    class="sticky top-[76px] sm:top-[84px] flex-none bg-neo-purple border-b-4 border-black p-2 overflow-x-auto no-scrollbar z-40">
    <div class="max-w-5xl mx-auto flex items-center gap-2 sm:gap-3 justify-center min-w-max px-2">

      <div class="flex gap-1 sm:gap-2 bg-black/10 p-1 rounded-2xl">
        <button id="tool-pencil" onmousedown="event.preventDefault()" onclick="App.selectTool('pencil')"
          class="neo-btn bg-neo-blue text-white w-12 h-12 sm:w-14 sm:h-14 text-lg sm:text-xl" aria-label="–û–ª—ñ–≤–µ—Ü—å">
          <i class="fas fa-pencil-alt"></i>
        </button>
        <button id="tool-eraser" onmousedown="event.preventDefault()" onclick="App.selectTool('eraser')"
          class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14 text-lg sm:text-xl" aria-label="–ì—É–º–∫–∞">
          <i class="fas fa-eraser"></i>
        </button>
        <button id="tool-shapes" onmousedown="event.preventDefault()" onclick="App.toggleExtra('shapes')"
          class="neo-btn bg-neo-yellow w-12 h-12 sm:w-14 sm:h-14 text-lg sm:text-xl" aria-label="–§—ñ–≥—É—Ä–∏">
          <i class="fas fa-shapes"></i>
        </button>
        <button id="tool-stamps" onmousedown="event.preventDefault()" onclick="App.toggleExtra('stamps')"
          class="neo-btn bg-teal-300 w-12 h-12 sm:w-14 sm:h-14 text-lg sm:text-xl" aria-label="–®—Ç–∞–º–ø–∏">
          <i class="fas fa-face-smile"></i>
        </button>
      </div>

      <!-- COLORS block (separate) -->
      <div class="flex items-center gap-2 bg-white border-4 border-black p-1.5 rounded-2xl shadow-neo-sm h-12 sm:h-14">
        <div id="palette" class="flex gap-2 items-center"></div>
        <div
          class="relative w-10 h-10 rounded-full border-4 border-black shadow-neo-sm overflow-hidden shrink-0 cursor-pointer transition-transform hover:scale-110 active:scale-95"
          title="–°–≤—ñ–π –∫–æ–ª—ñ—Ä">
          <div class="absolute inset-0 w-full h-full"
            style="background: conic-gradient(red, orange, yellow, lime, cyan, blue, magenta, red);"></div>
          <input type="color" id="custom-color" value="#000000"
            class="absolute inset-0 w-full h-full opacity-0 cursor-pointer p-0 border-0" aria-label="–°–≤—ñ–π –∫–æ–ª—ñ—Ä" />
        </div>
      </div>

      <!-- SIZE block (separate) -->
      <div class="flex items-center gap-2 bg-white border-4 border-black p-1.5 rounded-2xl shadow-neo-sm h-12 sm:h-14">
        <div class="w-8 flex justify-center"><i class="fas fa-sliders text-lg sm:text-xl text-neo-dark"></i></div>
        <input id="size" type="range" min="1" max="40" value="6" class="neo-range" aria-label="–†–æ–∑–º—ñ—Ä –ø–µ–Ω–∑–ª–∏–∫–∞" />
        <div id="size-badge"
          class="min-w-[2.5rem] flex justify-center items-center font-black text-lg sm:text-xl text-neo-dark">6</div>
      </div>

    </div>
  </div>

  <!-- EXTRA TOOLBAR (teal) ‚Äî appears under purple, toggled by Shapes/Stamps buttons (no reflow/scroll) -->
  <div id="extra-toolbar" class="extra-toolbar-fixed hidden" aria-label="–î–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–∞–Ω–µ–ª—å —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤">
    <div class="extra-toolbar-fixed-inner">
      <div
        class="max-w-5xl mx-auto flex gap-3 justify-center items-center overflow-x-auto overflow-y-visible no-scrollbar py-1 px-2">

        <div id="panel-shapes" class="hidden items-center gap-2 min-w-max">
          <button class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14 text-xl" data-shape="line"
            aria-label="–õ—ñ–Ω—ñ—è">‚ï±</button>
          <button class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14 text-xl" data-shape="rect"
            aria-label="–ü—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫">‚ñ°</button>
          <button class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14 text-xl" data-shape="circle"
            aria-label="–ö–æ–ª–æ">‚óã</button>
          <button class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14 text-xl" data-shape="triangle"
            aria-label="–¢—Ä–∏–∫—É—Ç–Ω–∏–∫">‚ñ≥</button>
          <button class="neo-btn bg-white w-12 h-12 sm:w-14 sm:h-14 text-xl" data-shape="star"
            aria-label="–ó—ñ—Ä–∫–∞">‚òÖ</button>
          <div class="h-8 w-[1px] bg-black/20 mx-1"></div>
          <label class="flex items-center gap-2 font-black select-none dark:text-white">
            <input id="fill-toggle" type="checkbox" class="neo-check" checked />
            <span>–ó–ê–õ–ò–í–ö–ê</span>
          </label>
        </div>

        <div id="panel-stamps" class="hidden items-center gap-3 min-w-max">
          <button onmousedown="event.preventDefault()" onclick="App.shuffleStamps()"
            class="neo-btn bg-neo-yellow w-12 h-12 sm:w-14 sm:h-14 shrink-0 text-2xl sm:text-3xl shadow-neo-sm"
            aria-label="–ü–µ—Ä–µ–º—ñ—à–∞—Ç–∏ —à—Ç–∞–º–ø–∏">üé≤</button>
          <div id="stamps" class="flex gap-2 min-w-max"></div>
        </div>

      </div>
    </div>
  </div>

  <!-- CANVAS AREA -->
  <main class="app-main flex-grow min-h-0 flex flex-col bg-neo-yellow/10 dark:bg-dark-bg overflow-hidden">
    <div class="max-w-5xl mx-auto w-full flex-grow min-h-0 flex flex-col">
      <div
        class="flex-grow min-h-0 bg-white dark:bg-dark-card border-4 border-black shadow-neo-lg rounded-[2rem] sm:rounded-[2.5rem] overflow-hidden flex flex-col">
        <div class="flex-grow min-h-0 overflow-hidden">
          <div id="canvas-wrap" class="canvas-wrap h-full">
            <canvas id="canvas" aria-label="–ü–æ–ª–æ—Ç–Ω–æ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è"></canvas>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- STATUS BADGE -->
  <div class="fixed bottom-6 right-6 sm:bottom-8 sm:right-8 z-40">
    <div
      class="bg-white dark:bg-dark-card border-4 border-black px-4 py-2 sm:px-6 sm:py-3 rounded-2xl sm:rounded-3xl font-black text-lg sm:text-xl shadow-neo dark:text-white">
      <span id="status">–û–õ–Ü–í–ï–¶–¨</span>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="toasts"
    class="fixed bottom-12 left-1/2 -translate-x-1/2 z-[100] flex flex-col gap-3 pointer-events-none w-max"></div>

  <!-- MODAL -->
  <div id="modal" class="fixed inset-0 bg-black/70 z-[200] hidden items-center justify-center p-6 backdrop-blur-md">
    <div
      class="bg-white dark:bg-dark-card border-4 border-black shadow-neo-lg rounded-[2rem] sm:rounded-[2.5rem] p-8 sm:p-10 w-full max-w-lg text-center">
      <h3 id="modal-title" class="text-2xl sm:text-3xl font-black uppercase mb-4 dark:text-white"></h3>
      <p id="modal-msg" class="text-lg sm:text-xl text-gray-600 dark:text-gray-300 mb-8 sm:mb-10 font-bold"></p>
      <div id="modal-actions" class="flex flex-col gap-3 sm:gap-4"></div>
    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>