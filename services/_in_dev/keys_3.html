<!DOCTYPE html>
<html lang="uk" data-theme="sunny">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ĞšĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ½Ğ¸Ğ¹ Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€ Ğ´Ğ»Ñ Ğ´Ñ–Ñ‚ĞµĞ¹</title>
    <meta name="description"
        content="Ğ‘ĞµĞ·ĞºĞ¾ÑˆÑ‚Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€ ĞºĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ¸ Ğ´Ğ»Ñ Ğ´Ñ–Ñ‚ĞµĞ¹ ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ¾Ñ. Ğ’Ğ¸Ğ²Ñ‡Ğ°Ğ¹Ñ‚Ğµ ĞºĞ¾Ğ¼Ğ¿'ÑÑ‚ĞµÑ€Ğ½Ñƒ Ğ³Ñ€Ğ°Ğ¼Ğ¾Ñ‚Ğ½Ñ–ÑÑ‚ÑŒ Ğ³Ñ€Ğ°ÑÑ‡Ğ¸!" />
    <meta name="keywords" content="ĞºĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ½Ğ¸Ğ¹ Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€, Ğ´Ñ–Ñ‚Ğ¸, Ğ½Ğ°Ğ²Ñ‡Ğ°Ğ½Ğ½Ñ, ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°, Ğ³Ñ€Ğ°, typing, keyboard, kids" />
    <meta name="author" content="ĞŸĞ°Ğ½ ĞÑ€Ñ‚ĞµĞ¼" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical"
        href="https://itnauka.org/services/digital_literacy/typing_skills/detect_and_type/index.html" />
    <meta property="og:title" content="Ğ¢Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€ ĞºĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ¸ Ğ´Ğ»Ñ Ğ´Ñ–Ñ‚ĞµĞ¹" />
    <meta property="og:description" content="Ğ‘ĞµĞ·ĞºĞ¾ÑˆÑ‚Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€ ĞºĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ¸ Ğ´Ğ»Ñ Ğ´Ñ–Ñ‚ĞµĞ¹ ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ¾Ñ." />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="uk_UA" />
    <meta name="theme-color" content="#FFE500" />

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N8T05K3NGT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date()); gtag('config', 'G-N8T05K3NGT');
    </script>
    <!-- Plausible -->
    <script async src="https://plausible.io/js/pa-kBgdFkemKx0WM6VJQvasn.js"></script>
    <script>
        window.plausible = window.plausible || function () { (plausible.q = plausible.q || []).push(arguments) };
        window.plausible.init = window.plausible.init || function (i) { window.plausible.o = i || {} };
        window.plausible.init();
    </script>

    <!-- Nunito font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       THEMES â€” 4 ĞºĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¾Ğ²Ñ– ÑÑ…ĞµĞ¼Ğ¸
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        /* ğŸŒ Ğ¡ĞĞĞ¯Ğ§ĞĞ˜Ğ™ (default) */
        :root,
        [data-theme="sunny"] {
            --bg: #FFE500;
            --bg-dot: rgba(0, 0, 0, 0.11);
            --surface: #FFFFFF;
            --field-bg: #FFFEF0;
            --text: #1A1A1A;
            --text-muted: #555555;
            --border-col: #1A1A1A;
            --shadow: 4px 4px 0 #1A1A1A;
            --shadow-lg: 6px 6px 0 #1A1A1A;
            --radius: 10px;
            /* 3 accent colors */
            --c1: #FF4757;
            /* score / primary */
            --c2: #00BCD4;
            /* timer / teal */
            --c3: #43A047;
            /* streak / green */
            /* Letter tile colors (3 cycling) */
            --lc0: #FFE500;
            --lt0: #1A1A1A;
            --lc1: #FF4757;
            --lt1: #FFFFFF;
            --lc2: #00BCD4;
            --lt2: #1A1A1A;
            /* Buttons */
            --btn-l1: #43A047;
            --btn-l2: #00BCD4;
            --btn-l3: #FF9800;
            --btn-l4: #FF4757;
            --btn-s1: #B2EBF2;
            --btn-s2: #00BCD4;
            --btn-s3: #FF8A65;
            --btn-start: #43A047;
            --btn-stop: #FF4757;
            --tip-bg: #FFFDE7;
        }

        /* ğŸŒŠ ĞœĞĞ Ğ¡Ğ¬ĞšĞ˜Ğ™ */
        [data-theme="ocean"] {
            --bg: #C5E8F8;
            --bg-dot: rgba(0, 30, 60, 0.09);
            --surface: #FFFFFF;
            --field-bg: #EBF5FC;
            --text: #0D2233;
            --text-muted: #3A607A;
            --border-col: #0D2233;
            --shadow: 4px 4px 0 #0D2233;
            --shadow-lg: 6px 6px 0 #0D2233;
            --c1: #0277BD;
            --c2: #FF7043;
            --c3: #00897B;
            --lc0: #C5E8F8;
            --lt0: #0D2233;
            --lc1: #0277BD;
            --lt1: #FFFFFF;
            --lc2: #FF7043;
            --lt2: #FFFFFF;
            --btn-l1: #00897B;
            --btn-l2: #0277BD;
            --btn-l3: #FF7043;
            --btn-l4: #E53935;
            --btn-s1: #B2EBF2;
            --btn-s2: #0277BD;
            --btn-s3: #FF7043;
            --btn-start: #00897B;
            --btn-stop: #E53935;
            --tip-bg: #E8F5E9;
        }

        /* ğŸŒ™ ĞĞ†Ğ§ĞĞ˜Ğ™ (Ğ²Ğ¸ÑĞ¾ĞºĞ° ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ÑÑ‚Ğ½Ñ–ÑÑ‚ÑŒ) */
        [data-theme="night"] {
            --bg: #14141F;
            --bg-dot: rgba(255, 255, 255, 0.05);
            --surface: #1E1E2E;
            --field-bg: #12121C;
            --text: #F0F0F0;
            --text-muted: #AAAAAA;
            --border-col: #F0F0F0;
            --shadow: 4px 4px 0 #FFD700;
            --shadow-lg: 6px 6px 0 #FFD700;
            --c1: #FF4D6A;
            --c2: #00E5FF;
            --c3: #FFD700;
            --lc0: #FFD700;
            --lt0: #14141F;
            --lc1: #FF4D6A;
            --lt1: #FFFFFF;
            --lc2: #00E5FF;
            --lt2: #14141F;
            --btn-l1: #2E7D32;
            --btn-l2: #00695C;
            --btn-l3: #E65100;
            --btn-l4: #B71C1C;
            --btn-s1: #1A237E;
            --btn-s2: #00695C;
            --btn-s3: #880E4F;
            --btn-start: #2E7D32;
            --btn-stop: #B71C1C;
            --tip-bg: #1E1E2E;
        }

        /* ğŸ©· Ğ¯Ğ“Ğ†Ğ”ĞĞ˜Ğ™ */
        [data-theme="berry"] {
            --bg: #FFDDE8;
            --bg-dot: rgba(100, 0, 50, 0.07);
            --surface: #FFFFFF;
            --field-bg: #FFF5F8;
            --text: #1A1A1A;
            --text-muted: #665566;
            --border-col: #1A1A1A;
            --shadow: 4px 4px 0 #1A1A1A;
            --shadow-lg: 6px 6px 0 #1A1A1A;
            --c1: #C62A47;
            --c2: #7B1FA2;
            --c3: #00897B;
            --lc0: #FFDDE8;
            --lt0: #1A1A1A;
            --lc1: #C62A47;
            --lt1: #FFFFFF;
            --lc2: #7B1FA2;
            --lt2: #FFFFFF;
            --btn-l1: #00897B;
            --btn-l2: #7B1FA2;
            --btn-l3: #E64A19;
            --btn-l4: #C62A47;
            --btn-s1: #F3E5F5;
            --btn-s2: #7B1FA2;
            --btn-s3: #C62A47;
            --btn-start: #00897B;
            --btn-stop: #C62A47;
            --tip-bg: #F3E5F5;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BASE RESET
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(circle, var(--bg-dot) 1.5px, transparent 1.5px);
            background-size: 26px 26px;
            min-height: 100vh;
            padding: 18px 14px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text);
            transition: background-color 0.4s, color 0.4s;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HEADER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .site-header {
            width: 100%;
            max-width: 920px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 14px;
            gap: 10px;
        }

        h1 {
            font-size: clamp(1.5em, 3.8vw, 2.2em);
            font-weight: 900;
            color: var(--text);
            text-shadow: 2px 2px 0 var(--surface);
            line-height: 1.15;
        }

        h1 i {
            margin-right: 6px;
        }

        .header-controls {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        .icon-btn {
            min-width: 50px;
            height: 50px;
            padding: 0 12px;
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            background: var(--surface);
            color: var(--text);
            font-family: inherit;
            font-size: 0.92em;
            font-weight: 800;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .icon-btn i {
            font-size: 1.15em;
        }

        .icon-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: var(--shadow-lg);
        }

        .icon-btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 var(--border-col);
        }

        .icon-btn:focus-visible {
            outline: 3px solid var(--c2);
            outline-offset: 3px;
        }

        .lang-btn.ua-active {
            background: #0057B7;
            color: #FFD700;
            border-color: #003A8C;
        }

        .lang-btn.en-active {
            background: #B22234;
            color: #FFFFFF;
            border-color: #7A0019;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GAME CONTAINER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #game-container {
            width: 100%;
            max-width: 920px;
            background: var(--surface);
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow-lg);
            border-radius: 16px;
            padding: 18px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            transition: background-color 0.4s;
        }

        /* â”€â”€ INFO PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #info-panel {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            width: 100%;
        }

        .info-card {
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            padding: 11px 8px;
            text-align: center;
            font-size: clamp(1em, 2.4vw, 1.2em);
            font-weight: 900;
            color: #fff;
            transition: transform 0.15s, box-shadow 0.15s;
        }

        .info-card i {
            margin-right: 5px;
        }

        #score {
            background: var(--c1);
        }

        #timer {
            background: var(--c2);
        }

        #streak {
            background: var(--c3);
        }

        .info-card.pop {
            transform: scale(1.07);
            box-shadow: var(--shadow-lg);
        }

        #timer.timer-low {
            background: #FF2222 !important;
            animation: timerPulse 0.55s infinite alternate;
        }

        @keyframes timerPulse {
            from {
                transform: scale(1);
            }

            to {
                transform: scale(1.06);
            }
        }

        /* â”€â”€ ADAPTIVE BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #adaptive-bar {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85em;
            font-weight: 700;
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 0.4s;
        }

        #adaptive-bar.visible {
            opacity: 1;
        }

        #adaptive-bar i {
            color: var(--c2);
        }

        #adaptive-track {
            flex: 1;
            height: 11px;
            border: 2px solid var(--border-col);
            border-radius: 8px;
            background: var(--field-bg);
            overflow: hidden;
        }

        #adaptive-fill {
            height: 100%;
            width: 50%;
            background: var(--c3);
            border-radius: 6px;
            transition: width 0.7s, background 0.7s;
        }

        #adaptive-label-text {
            min-width: 28px;
            text-align: right;
        }

        /* â”€â”€ GAME FIELD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #game-field {
            width: 100%;
            height: 260px;
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            background: var(--field-bg);
            position: relative;
            overflow: hidden;
            transition: background-color 0.4s;
        }

        /* â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .btn-row {
            display: flex;
            gap: 9px;
            width: 100%;
        }

        .btn {
            flex: 1;
            min-width: 0;
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            padding: 11px 7px;
            font-family: inherit;
            font-size: clamp(0.78em, 1.7vw, 0.97em);
            font-weight: 800;
            cursor: pointer;
            color: var(--text);
            background: var(--surface);
            position: relative;
            white-space: nowrap;
            transition: transform 0.1s, box-shadow 0.1s, filter 0.1s;
        }

        .btn i {
            margin-right: 4px;
        }

        .btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: var(--shadow-lg);
        }

        .btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 var(--border-col);
        }

        .btn:focus-visible {
            outline: 3px solid var(--c2);
            outline-offset: 3px;
        }

        .btn.selected::after {
            content: '\f00c';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 4px;
            right: 7px;
            font-size: 0.65em;
            opacity: 0.65;
        }

        .btn.selected {
            filter: brightness(0.86);
            box-shadow: var(--shadow-lg);
        }

        /* Level colors */
        #beginner {
            background: var(--btn-l1);
            color: #fff;
        }

        #easy {
            background: var(--btn-l2);
            color: #fff;
        }

        #medium {
            background: var(--btn-l3);
            color: #fff;
        }

        #hard {
            background: var(--btn-l4);
            color: #fff;
        }

        /* Speed colors */
        #slow {
            background: var(--btn-s1);
        }

        #medium-speed {
            background: var(--btn-s2);
            color: #fff;
        }

        #fast {
            background: var(--btn-s3);
            color: #fff;
        }

        /* Action buttons */
        .action-row {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        #start-button,
        #restart-button {
            flex: unset;
            min-width: 168px;
            font-size: clamp(0.95em, 2.2vw, 1.1em);
            padding: 13px 22px;
        }

        #start-button {
            background: var(--btn-start);
            color: #fff;
        }

        #restart-button {
            background: var(--btn-stop);
            color: #fff;
            display: none;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LETTERS  â† CORE ANIMATION FIXES
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .letter {
            position: absolute;
            font-size: 2em;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border-radius: 12px;
            border: 3px solid var(--border-col);
            box-shadow: 3px 3px 0 var(--border-col);
            /*
        âš ï¸  CRITICAL: DO NOT use "transition: all" here!
        That caused the "letter teleports to left:0 in red" bug.
        Only transition safe, non-animated properties:
      */
            transition: transform 0.22s, opacity 0.22s, background-color 0.18s, border-color 0.18s;
            will-change: left;
            /* Main movement animation â€” uses CSS variable set per-letter in JS */
            animation: moveRight var(--letter-dur, 6000ms) linear forwards;
        }

        .letter.color-0 {
            background: var(--lc0);
            color: var(--lt0);
        }

        .letter.color-1 {
            background: var(--lc1);
            color: var(--lt1);
        }

        .letter.color-2 {
            background: var(--lc2);
            color: var(--lt2);
        }

        /* âœ… Correct: scale up + fade (letter is frozen in place via JS animationPlayState) */
        .letter.correct {
            transform: scale(1.3);
            opacity: 0;
            background-color: var(--c3) !important;
            border-color: var(--c3) !important;
        }

        /* âŒ Missed: visual overrides applied via JS inline styles (highest specificity) */
        .letter.missed {
            opacity: 0.7;
        }

        /* âš¡ Urgent: keeps moveRight running via negative animation-delay trick
       --letter-start-offset is set by JS when urgentTimeout fires = negative elapsed ms
       This makes the browser "resume" moveRight exactly where it was */
        .letter.urgent {
            animation-name: moveRight, urgentGlow;
            animation-duration: var(--letter-dur, 6000ms), 0.42s;
            animation-timing-function: linear, ease;
            animation-iteration-count: 1, infinite;
            animation-fill-mode: forwards, none;
            animation-direction: normal, alternate;
            animation-delay: var(--letter-start-offset, 0ms), 0ms;
        }

        @keyframes moveRight {
            from {
                left: -70px;
            }

            to {
                left: calc(100% + 10px);
            }
        }

        @keyframes urgentGlow {
            from {
                box-shadow: 3px 3px 0 var(--border-col), 0 0 5px rgba(255, 50, 50, 0.3);
                border-color: #FF4757;
            }

            to {
                box-shadow: 3px 3px 0 var(--border-col), 0 0 18px rgba(255, 0, 0, 0.9);
                border-color: #FF0000;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FEEDBACK MESSAGE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #feedback-message {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--c3);
            color: #fff;
            border: 2px solid var(--border-col);
            box-shadow: 3px 3px 0 var(--border-col);
            padding: 7px 18px;
            border-radius: 30px;
            font-size: clamp(0.82em, 2.2vw, 1.05em);
            font-weight: 800;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 15;
            white-space: nowrap;
        }

        #feedback-message.show {
            opacity: 1;
        }

        #feedback-message.negative {
            background: var(--c1);
        }

        #feedback-message.neutral {
            background: var(--c2);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MODAL â€” Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ Ğ·ÑƒĞ¿Ğ¸Ğ½ĞºĞ¸
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.52);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            backdrop-filter: blur(5px);
        }

        .modal-box {
            background: var(--surface);
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow-lg);
            border-radius: 18px;
            padding: 30px 34px;
            max-width: 380px;
            width: 90%;
            text-align: center;
            animation: popIn 0.2s ease-out;
        }

        .modal-box h3 {
            font-size: 1.4em;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .modal-box p {
            color: var(--text-muted);
            font-size: 0.95em;
            font-weight: 600;
            margin-bottom: 22px;
            line-height: 1.5;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .modal-actions .btn {
            flex: 1;
        }

        #modal-resume-btn {
            background: var(--btn-start);
            color: #fff;
        }

        #modal-stop-btn {
            background: var(--btn-stop);
            color: #fff;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GAME OVER OVERLAY â€” Ğ¿Ğ¾Ğ²Ğ½Ğ° ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #go-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.62);
            display: flex;
            align-items: flex-start;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(7px);
            padding: 20px 14px 40px;
            overflow-y: auto;
        }

        .go-panel {
            background: var(--surface);
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow-lg);
            border-radius: 20px;
            padding: 26px 24px;
            max-width: 580px;
            width: 100%;
            margin: auto;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            from {
                transform: scale(0.82);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .go-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .go-header .go-icon {
            font-size: 2.6em;
            color: var(--c1);
            display: block;
            margin-bottom: 6px;
        }

        .go-header h2 {
            font-size: clamp(1.45em, 4vw, 2em);
            font-weight: 900;
        }

        /* Stats 4-up grid */
        .go-stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 14px;
        }

        @media (min-width: 460px) {
            .go-stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .go-stat {
            background: var(--field-bg);
            border: 2px solid var(--border-col);
            border-radius: 12px;
            padding: 13px 8px;
            text-align: center;
        }

        .go-stat .go-stat-icon {
            font-size: 1.3em;
            display: block;
            margin-bottom: 4px;
        }

        .go-stat-value {
            font-size: 1.7em;
            font-weight: 900;
            line-height: 1;
        }

        .go-stat-label {
            font-size: 0.72em;
            font-weight: 700;
            color: var(--text-muted);
            margin-top: 3px;
        }

        .go-stat:nth-child(1) .go-stat-icon {
            color: var(--c1);
        }

        .go-stat:nth-child(2) .go-stat-icon {
            color: var(--c2);
        }

        .go-stat:nth-child(3) .go-stat-icon {
            color: var(--c3);
        }

        .go-stat:nth-child(4) .go-stat-icon {
            color: var(--c1);
        }

        /* Tags row */
        .go-tags {
            display: flex;
            gap: 7px;
            flex-wrap: wrap;
            margin-bottom: 14px;
        }

        .go-tag {
            background: var(--bg);
            border: 2px solid var(--border-col);
            border-radius: 8px;
            padding: 4px 11px;
            font-size: 0.87em;
            font-weight: 800;
        }

        /* Missed letters */
        .go-section {
            margin-bottom: 14px;
        }

        .go-section h4 {
            font-size: 0.95em;
            font-weight: 800;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .missed-row {
            display: flex;
            gap: 7px;
            flex-wrap: wrap;
        }

        .missed-chip {
            background: var(--c1);
            color: #fff;
            border: 2px solid var(--border-col);
            border-radius: 9px;
            padding: 5px 13px;
            font-size: 1.15em;
            font-weight: 900;
        }

        .missed-chip sub {
            font-size: 0.55em;
            font-weight: 700;
            opacity: 0.85;
        }

        /* Achievement */
        #go-achievement {
            background: var(--c2);
            color: #fff;
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow);
            border-radius: 10px;
            padding: 10px 14px;
            font-size: 1.05em;
            font-weight: 900;
            text-align: center;
            margin-bottom: 14px;
        }

        /* Tips */
        .tip-item {
            background: var(--tip-bg);
            border: 2px solid var(--border-col);
            border-radius: 9px;
            padding: 9px 13px;
            font-size: 0.88em;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 7px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .tip-item i {
            color: #FF9800;
            margin-top: 2px;
            flex-shrink: 0;
        }

        /* Best score */
        #go-best {
            text-align: center;
            font-size: 1.05em;
            font-weight: 900;
            color: var(--c3);
            margin-bottom: 14px;
            padding: 9px;
            border: 2px dashed var(--c3);
            border-radius: 9px;
        }

        /* Actions */
        .go-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .go-actions .btn {
            flex: unset;
            min-width: 155px;
            font-size: 1.05em;
            padding: 13px 20px;
        }

        .go-btn-play {
            background: var(--btn-start) !important;
            color: #fff !important;
        }

        .go-btn-close {
            background: var(--surface) !important;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       INSTRUCTIONS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #instructions {
            width: 100%;
            max-width: 920px;
            background: var(--surface);
            border: 2px solid var(--border-col);
            box-shadow: var(--shadow);
            border-radius: 16px;
            padding: 20px 22px;
            margin-top: 14px;
            color: var(--text);
            transition: background-color 0.4s;
        }

        #instructions h3 {
            font-size: 1.1em;
            font-weight: 900;
            margin-bottom: 10px;
        }

        #instructions p {
            font-size: 0.92em;
            font-weight: 600;
            line-height: 1.6;
            margin-bottom: 5px;
        }

        .info-block {
            border-radius: 9px;
            padding: 11px 13px;
            margin: 8px 0;
            border: 2px solid var(--border-col);
            font-size: 0.89em;
            font-weight: 600;
            line-height: 1.65;
        }

        .info-block.blue {
            background: #E3F2FD;
        }

        .info-block.purple {
            background: #EDE7F6;
        }

        .info-block.yellow {
            background: #FFFDE7;
        }

        [data-theme="night"] .info-block {
            background: #1E1E2E;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STREAK BURST OVERLAY
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #streak-overlay {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.15s;
        }

        #streak-overlay.show {
            opacity: 1;
        }

        #streak-burst {
            font-size: clamp(2.2em, 7vw, 4em);
            font-weight: 900;
            color: var(--text);
            text-shadow: 3px 3px 0 var(--surface), 6px 6px 0 var(--text);
            animation: burstAnim 1.05s ease-out forwards;
        }

        @keyframes burstAnim {
            0% {
                transform: scale(0.3);
                opacity: 1;
            }

            40% {
                transform: scale(1.15);
                opacity: 1;
            }

            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOOTER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        footer {
            text-align: center;
            margin-top: 22px;
            color: var(--text);
            font-weight: 700;
            font-size: 0.82em;
            opacity: 0.55;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESPONSIVE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 540px) {
            .btn-row {
                flex-wrap: wrap;
            }

            .btn {
                min-width: 46%;
            }

            #game-field {
                height: 210px;
            }

            .letter {
                width: 50px;
                height: 50px;
                font-size: 1.7em;
            }

            #start-button,
            #restart-button {
                min-width: 140px;
            }
        }

        @media (max-width: 380px) {
            h1 {
                font-size: 1.3em;
            }

            .icon-btn {
                min-width: 44px;
                height: 44px;
            }
        }
    </style>
</head>

<body>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <header class="site-header">
        <h1><i class="fas fa-gamepad"></i> ĞšĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ½Ğ¸Ğ¹<br>Ñ‚Ñ€ĞµĞ½Ğ°Ğ¶ĞµÑ€</h1>
        <div class="header-controls">
            <button id="lang-toggle" class="icon-btn lang-btn ua-active" onclick="toggleLanguage()"
                title="Ğ—Ğ¼Ñ–Ğ½Ğ¸Ñ‚Ğ¸ Ğ¼Ğ¾Ğ²Ñƒ / Change language" aria-label="ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğ¸ Ğ¼Ğ¾Ğ²Ñƒ ĞºĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ¸">
                <i class="fas fa-keyboard"></i>
                <span id="lang-label">UA</span>
            </button>
            <button id="theme-toggle" class="icon-btn" onclick="cycleTheme()" title="Ğ—Ğ¼Ñ–Ğ½Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¾Ğ²Ñƒ Ñ‚ĞµĞ¼Ñƒ"
                aria-label="Ğ—Ğ¼Ñ–Ğ½Ğ¸Ñ‚Ğ¸ Ñ‚ĞµĞ¼Ñƒ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ½Ñ">
                <i class="fas fa-palette"></i>
            </button>
            <button id="sound-toggle" class="icon-btn" onclick="toggleSound()" title="Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸/Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ·Ğ²ÑƒĞº"
                aria-label="Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ°Ğ±Ğ¾ Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ·Ğ²ÑƒĞº">
                <i id="sound-icon" class="fas fa-volume-high"></i>
            </button>
        </div>
    </header>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GAME CONTAINER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="game-container">

        <!-- Info panel -->
        <div id="info-panel">
            <div id="score" class="info-card" aria-live="polite">
                <i class="fas fa-trophy"></i><span id="score-val">0</span>
            </div>
            <div id="timer" class="info-card" aria-live="polite">
                <i class="fas fa-clock"></i><span id="timer-val">60</span>
            </div>
            <div id="streak" class="info-card" aria-live="polite">
                <i class="fas fa-fire"></i><span id="streak-val">0</span>
            </div>
        </div>

        <!-- Adaptive difficulty bar -->
        <div id="adaptive-bar" aria-label="ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ">
            <i class="fas fa-robot"></i>
            <span>Ğ¢ĞµĞ¼Ğ¿:</span>
            <div id="adaptive-track">
                <div id="adaptive-fill"></div>
            </div>
            <span id="adaptive-label-text">50%</span>
        </div>

        <!-- Game field -->
        <div id="game-field" role="region" aria-label="Ğ†Ğ³Ñ€Ğ¾Ğ²Ğµ Ğ¿Ğ¾Ğ»Ğµ">
            <div id="feedback-message" aria-live="polite"></div>
        </div>

        <!-- Level selection -->
        <div class="btn-row" id="levels" role="group" aria-label="Ğ Ñ–Ğ²ĞµĞ½ÑŒ ÑĞºĞ»Ğ°Ğ´Ğ½Ğ¾ÑÑ‚Ñ–">
            <button id="beginner" class="btn selected" onclick="selectLevel('beginner')">
                <i class="fas fa-star"></i> Ğ”ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ğ¹
            </button>
            <button id="easy" class="btn" onclick="selectLevel('easy')">
                <i class="fas fa-face-smile"></i> ĞŸÑ€Ğ¾ÑÑ‚Ğ¸Ğ¹
            </button>
            <button id="medium" class="btn" onclick="selectLevel('medium')">
                <i class="fas fa-dumbbell"></i> Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹
            </button>
            <button id="hard" class="btn" onclick="selectLevel('hard')">
                <i class="fas fa-fire-flame-curved"></i> Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ğ¸Ğ¹
            </button>
        </div>

        <!-- Speed selection -->
        <div class="btn-row" id="speed-control" role="group" aria-label="ĞŸĞ¾Ñ‡Ğ°Ñ‚ĞºĞ¾Ğ²Ğ° ÑˆĞ²Ğ¸Ğ´ĞºÑ–ÑÑ‚ÑŒ">
            <button id="slow" class="btn" onclick="selectSpeed('slow')">
                <i class="fas fa-gauge-simple-low"></i> ĞŸĞ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğ¾
            </button>
            <button id="medium-speed" class="btn selected" onclick="selectSpeed('medium')">
                <i class="fas fa-person-walking"></i> Ğ¡ĞµÑ€ĞµĞ´Ğ½ÑŒĞ¾
            </button>
            <button id="fast" class="btn" onclick="selectSpeed('fast')">
                <i class="fas fa-person-running"></i> Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¾
            </button>
        </div>

        <!-- Action buttons -->
        <div class="action-row">
            <button id="start-button" class="btn" onclick="startGame()">
                <i class="fas fa-rocket"></i> ĞŸĞ¾Ñ‡Ğ°Ñ‚Ğ¸ Ğ³Ñ€Ñƒ
            </button>
            <button id="restart-button" class="btn" onclick="askStop()">
                <i class="fas fa-stop"></i> Ğ—ÑƒĞ¿Ğ¸Ğ½Ğ¸Ñ‚Ğ¸ Ğ³Ñ€Ñƒ
            </button>
        </div>

    </div><!-- /game-container -->

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     INSTRUCTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="instructions">
        <h3><i class="fas fa-circle-info"></i> Ğ¯Ğº Ğ³Ñ€Ğ°Ñ‚Ğ¸:</h3>
        <p><strong>1.</strong> ĞĞ±ĞµÑ€Ğ¸ Ñ€Ñ–Ğ²ĞµĞ½ÑŒ Ñ‚Ğ° ÑˆĞ²Ğ¸Ğ´ĞºÑ–ÑÑ‚ÑŒ, Ğ¿Ğ¾Ñ‚Ñ–Ğ¼ Ğ½Ğ°Ñ‚Ğ¸ÑĞ½Ğ¸ Â«ĞŸĞ¾Ñ‡Ğ°Ñ‚Ğ¸ Ğ³Ñ€ÑƒÂ».</p>
        <p><strong>2.</strong> Ğ›Ñ–Ñ‚ĞµÑ€Ğ¸ Ğ»ĞµÑ‚ÑÑ‚ÑŒ Ğ·Ğ»Ñ–Ğ²Ğ° Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ¾ â€” Ğ²ÑÑ‚Ğ¸Ğ³Ğ½Ğ¸ Ğ½Ğ°Ñ‚Ğ¸ÑĞ½ÑƒÑ‚Ğ¸ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ñƒ ĞºĞ»Ğ°Ğ²Ñ–ÑˆÑƒ!</p>
        <p><strong>3.</strong> ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ– Ğ½Ğ°Ñ‚Ğ¸ÑĞºĞ°Ğ½Ğ½Ñ Ğ¿Ñ–Ğ´Ñ€ÑĞ´ = Ğ±Ñ–Ğ»ÑŒÑˆĞµ Ğ±Ğ°Ğ»Ñ–Ğ² Ñ– ÑĞµÑ€Ñ–Ñ <i class="fas fa-fire"></i>.</p>
        <p><strong>4.</strong> Ğ“Ñ€Ğ° ÑĞ°Ğ¼Ğ° Ñ€ĞµĞ³ÑƒĞ»ÑÑ” Ñ‚ĞµĞ¼Ğ¿: Ğ´Ğ¾Ğ±Ñ€Ğµ ÑĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑ”ÑˆÑÑ â€” Ğ¿Ñ€Ğ¸ÑĞºĞ¾Ñ€ÑÑ”, ÑĞºĞ»Ğ°Ğ´Ğ½Ğ¾ â€” ÑĞ¿Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½ÑÑ” <i
                class="fas fa-robot"></i>.</p>
        <p><strong>5.</strong> Ğ£ Ñ‚ĞµĞ±Ğµ Ñ” <span id="game-duration-text">60</span> ÑĞµĞºÑƒĞ½Ğ´ Ğ½Ğ° Ğ³Ñ€Ñƒ.</p>
        <div class="info-block blue">
            <strong><i class="fas fa-layer-group"></i> Ğ Ñ–Ğ²Ğ½Ñ–:</strong><br>
            <i class="fas fa-star"></i> <strong>Ğ”ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ğ¹</strong> â€” 10 Ğ½Ğ°Ğ¹Ğ¿Ñ€Ğ¾ÑÑ‚Ñ–ÑˆĞ¸Ñ… Ğ»Ñ–Ñ‚ĞµÑ€ (Ğ°, Ğ¾, Ñ–, Ğµ, Ğ½, Ñ‚, Ñ, Ñ€,
            Ğ², Ğ»)<br>
            <i class="fas fa-face-smile"></i> <strong>ĞŸÑ€Ğ¾ÑÑ‚Ğ¸Ğ¹</strong> â€” Ğ²ÑÑ– Ğ¼Ğ°Ğ»Ñ– Ğ»Ñ–Ñ‚ĞµÑ€Ğ¸ Ğ°Ğ»Ñ„Ğ°Ğ²Ñ–Ñ‚Ñƒ<br>
            <i class="fas fa-dumbbell"></i> <strong>Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹</strong> â€” Ğ¼Ğ°Ğ»Ñ– + Ğ²ĞµĞ»Ğ¸ĞºÑ– (Shift + Ğ»Ñ–Ñ‚ĞµÑ€Ğ°)<br>
            <i class="fas fa-fire-flame-curved"></i> <strong>Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ğ¸Ğ¹</strong> â€” Ğ»Ñ–Ñ‚ĞµÑ€Ğ¸ + Ñ†Ğ¸Ñ„Ñ€Ğ¸ + ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¸
        </div>
        <div class="info-block purple">
            <strong><i class="fas fa-keyboard"></i> Ğ’ĞµĞ»Ğ¸ĞºÑ– Ğ»Ñ–Ñ‚ĞµÑ€Ğ¸ Ñ‚Ğ° ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¸:</strong><br>
            â€¢ <kbd>Shift</kbd> + Ğ»Ñ–Ñ‚ĞµÑ€Ğ° = Ğ²ĞµĞ»Ğ¸ĞºĞ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´, Shift + Ğ° = Ğ)<br>
            â€¢ <kbd>Shift</kbd> + Ñ†Ğ¸Ñ„Ñ€Ğ° = ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» (Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´, Shift + 1 = !)
        </div>
        <div class="info-block yellow">
            <strong><i class="fas fa-triangle-exclamation"></i> Ğ’Ğ°Ğ¶Ğ»Ğ¸Ğ²Ğ¾:</strong>
            ĞŸĞµÑ€ĞµĞ´ Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºĞ¾Ğ¼ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸ Ğ¼Ğ¾Ğ²Ñƒ ĞºĞ»Ğ°Ğ²Ñ–Ğ°Ñ‚ÑƒÑ€Ğ¸ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾ Ğ´Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñƒ
            <strong>UA / EN</strong> Ñƒ Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğ¼Ñƒ Ğ²ĞµÑ€Ñ…Ğ½ÑŒĞ¾Ğ¼Ñƒ ĞºÑƒÑ‚Ñ–.
        </div>
    </div>

    <footer>2025 â€” ĞšĞ¾Ğ¼Ğ¿'ÑÑ‚ĞµÑ€Ğ½Ğ° Ğ½Ğ°ÑƒĞºĞ° Ğ· Ğ¿Ğ°Ğ½Ğ¾Ğ¼ ĞÑ€Ñ‚ĞµĞ¼Ğ¾Ğ¼</footer>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ Ğ·ÑƒĞ¿Ğ¸Ğ½ĞºĞ¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="confirm-modal" class="modal-overlay" style="display:none" role="dialog" aria-modal="true"
        aria-labelledby="confirm-title">
        <div class="modal-box">
            <h3 id="confirm-title">
                <i class="fas fa-triangle-exclamation" style="color:var(--c1)"></i>
                Ğ—ÑƒĞ¿Ğ¸Ğ½Ğ¸Ñ‚Ğ¸ Ğ³Ñ€Ñƒ?
            </h3>
            <p>Ğ’ĞµÑÑŒ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑ Ğ¿Ğ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ñ— Ğ³Ñ€Ğ¸ (Ğ±Ğ°Ğ»Ğ¸, ÑĞµÑ€Ñ–Ñ, ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°) Ğ±ÑƒĞ´Ğµ ÑĞºĞ¸Ğ½ÑƒÑ‚Ğ¾.<br>Ğ¥Ğ¾Ñ‡ĞµÑˆ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ²Ğ¶Ğ¸Ñ‚Ğ¸ Ğ³Ñ€Ğ°Ñ‚Ğ¸?</p>
            <div class="modal-actions">
                <button id="modal-resume-btn" class="btn" onclick="closeConfirm()">
                    <i class="fas fa-play"></i> ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ²Ğ¶Ğ¸Ñ‚Ğ¸
                </button>
                <button id="modal-stop-btn" class="btn" onclick="confirmStop()">
                    <i class="fas fa-stop"></i> Ğ—ÑƒĞ¿Ğ¸Ğ½Ğ¸Ñ‚Ğ¸
                </button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GAME OVER OVERLAY â€” ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="go-overlay" style="display:none" role="dialog" aria-modal="true" aria-labelledby="go-title">
        <div class="go-panel">
            <div class="go-header">
                <i class="fas fa-flag-checkered go-icon"></i>
                <h2 id="go-title">Ğ§Ğ°Ñ Ğ²Ğ¸Ğ¹ÑˆĞ¾Ğ²!</h2>
            </div>

            <!-- 4 key stats -->
            <div class="go-stats-grid">
                <div class="go-stat">
                    <i class="fas fa-trophy go-stat-icon"></i>
                    <div class="go-stat-value" id="go-score">0</div>
                    <div class="go-stat-label">Ğ‘Ğ°Ğ»Ñ–Ğ²</div>
                </div>
                <div class="go-stat">
                    <i class="fas fa-bullseye go-stat-icon"></i>
                    <div class="go-stat-value" id="go-accuracy">0%</div>
                    <div class="go-stat-label">Ğ¢Ğ¾Ñ‡Ğ½Ñ–ÑÑ‚ÑŒ</div>
                </div>
                <div class="go-stat">
                    <i class="fas fa-gauge go-stat-icon"></i>
                    <div class="go-stat-value" id="go-cpm">0</div>
                    <div class="go-stat-label">Ğ¡Ğ¸Ğ¼Ğ²Ğ¾Ğ»Ñ–Ğ²/Ñ…Ğ²</div>
                </div>
                <div class="go-stat">
                    <i class="fas fa-fire go-stat-icon"></i>
                    <div class="go-stat-value" id="go-streak">0</div>
                    <div class="go-stat-label">ĞœĞ°ĞºÑ. ÑĞµÑ€Ñ–Ñ</div>
                </div>
            </div>

            <!-- Tags: level, speed, language -->
            <div class="go-tags" id="go-tags"></div>

            <!-- Most missed letters -->
            <div class="go-section" id="go-missed-section" style="display:none">
                <h4><i class="fas fa-magnifying-glass"></i> ĞĞ°Ğ¹Ñ‡Ğ°ÑÑ‚Ñ–ÑˆĞµ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑ‰ĞµĞ½Ñ–:</h4>
                <div class="missed-row" id="go-missed-row"></div>
            </div>

            <!-- Achievement -->
            <div id="go-achievement"></div>

            <!-- Record -->
            <div id="go-best" style="display:none"></div>

            <!-- Tips -->
            <div class="go-section">
                <h4><i class="fas fa-lightbulb"></i> ĞŸĞ¾Ñ€Ğ°Ğ´Ğ¸ Ğ´Ğ»Ñ Ñ‚ĞµĞ±Ğµ:</h4>
                <div id="go-tips-list"></div>
            </div>

            <div class="go-actions">
                <button class="btn go-btn-play" onclick="startGameFromGO()">
                    <i class="fas fa-rotate-right"></i> Ğ“Ñ€Ğ°Ñ‚Ğ¸ Ñ‰Ğµ Ñ€Ğ°Ğ·
                </button>
                <button class="btn go-btn-close" onclick="closeGO()">
                    <i class="fas fa-xmark"></i> Ğ—Ğ°ĞºÑ€Ğ¸Ñ‚Ğ¸
                </button>
            </div>
        </div>
    </div>

    <!-- Streak burst overlay -->
    <div id="streak-overlay">
        <div id="streak-burst"></div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONSTANTS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const GAME_DURATION_SEC = 60;
        const MAX_ACTIVE_LETTERS = 22;
        const RARE_CHAR_PROB = 0.02;
        const POINTS_FAST = 3;
        const POINTS_MEDIUM = 2;
        const POINTS_DEFAULT = 1;
        const TIME_FAST_MS = 1000;
        const TIME_MEDIUM_MS = 2000;
        const STREAK_BONUS_DIV = 5;
        const INITIAL_SPAWN_DELAY_MS = 900;
        const LETTER_REMOVE_DELAY_MS = 340;
        const LOW_TIME_THRESHOLD = 10;
        const GAME_FIELD_H = 260;
        const LETTER_H = 60;

        /*
          ADAPTIVE â€” Ğ’Ğ˜ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ: Ğ½Ğ°Ğ±Ğ°Ğ³Ğ°Ñ‚Ğ¾ Ğ¼'ÑĞºÑˆĞµ Ñ€ĞµĞ³ÑƒĞ»ÑĞ²Ğ°Ğ½Ğ½Ñ
          ĞšÑ€Ğ¾Ğº 10% (Ğ±ÑƒĞ»Ğ¾ 15%), ĞºÑƒĞ»Ğ´Ğ°ÑƒĞ½ 7Ñ (Ğ±ÑƒĞ»Ğ¾ 4Ñ),
          Ğ¿Ğ¾Ñ€Ğ¾Ğ³Ñ–Ğ² Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ¾ 8 Ğ²Ğ¸Ğ¼Ñ–Ñ€Ñ–Ğ² (Ğ±ÑƒĞ»Ğ¾ 5).
          Ğ¢Ğ°Ğº Ğ¿Ñ–ÑĞ»Ñ ÑĞµÑ€Ñ–Ñ— 5 Ğ²Ğ´Ğ°Ñ‡ Ñ‚ĞµĞ¼Ğ¿ Ğ·Ñ€Ğ¾ÑÑ‚Ğµ Ğ»Ğ¸ÑˆĞµ Ğ½Ğ° 10%,
          Ğ° Ğ½Ğµ Ğ½Ğ° 30%+ ÑĞº Ñ€Ğ°Ğ½Ñ–ÑˆĞµ.
        */
        const AD_WINDOW = 14;     // Ğ¾ÑÑ‚Ğ°Ğ½Ğ½Ñ–Ñ… N Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ–Ğ²
        const AD_COOLDOWN_MS = 7000;   // Ğ¿Ğ°ÑƒĞ·Ğ° Ğ¼Ñ–Ğ¶ Ğ·Ğ¼Ñ–Ğ½Ğ°Ğ¼Ğ¸
        const AD_STEP = 0.10;   // +/- 10% Ğ·Ğ° Ñ€Ğ°Ğ·
        const AD_MAX = 1.75;   // Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ¿Ñ€Ğ¸ÑĞºĞ¾Ñ€ĞµĞ½Ğ½Ñ
        const AD_MIN = 0.50;
        const AD_MIN_DATA = 8;      // Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼ Ğ²Ğ¸Ğ¼Ñ–Ñ€Ñ–Ğ² Ğ¿ĞµÑ€ĞµĞ´ Ñ€Ñ–ÑˆĞµĞ½Ğ½ÑĞ¼
        const AD_UP_THRESH = 0.82;   // â‰¥82% Ğ²Ğ»ÑƒÑ‡Ğ°Ğ½ÑŒ â†’ Ğ¿Ñ€Ğ¸ÑĞºĞ¾Ñ€Ğ¸Ñ‚Ğ¸
        const AD_DOWN_THRESH = 0.40;   // â‰¤40% Ğ²Ğ»ÑƒÑ‡Ğ°Ğ½ÑŒ â†’ ÑĞ¿Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğ¸Ñ‚Ğ¸

        /*
          MISSED_RATIO: 0.93 â†’ Ğ±ÑƒĞºĞ²Ğ° "Ğ·Ğ°Ğ¼ĞµÑ€Ğ·Ğ°Ñ”" Ğ½Ğ° 93% ÑĞ²Ğ¾Ğ³Ğ¾ ÑˆĞ»ÑÑ…Ñƒ
          ĞŸÑ€Ğ¸ Ğ¿Ğ¾Ğ»Ñ– ~870px: 93% = Ğ»Ñ–Ğ²Ğ° Ğ¼ĞµĞ¶Ğ° Ğ±ÑƒĞºĞ²Ğ¸ â‰ˆ 810px (Ğ· 870px) â€” Ñ‡Ñ–Ñ‚ĞºĞ¾ Ğ²Ğ¸Ğ´Ğ½Ğ¾
          Ğ Ğ°Ğ½Ñ–ÑˆĞµ timeout=animSpeed (100%) â†’ Ğ±ÑƒĞºĞ²Ğ° Ğ²Ğ¶Ğµ Ğ¹ÑˆĞ»Ğ° Ğ·Ğ° ĞµĞºÑ€Ğ°Ğ½ â†’ Ğ·'ÑĞ²Ğ»ÑĞ»Ğ°ÑÑŒ Ñƒ Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºÑƒ
        */
        const MISSED_RATIO = 0.93;
        const URGENT_RATIO = 0.65;

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CHAR SETS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const CHAR_SETS = {
            ua: {
                beginner: "Ğ°Ğ¾Ñ–Ñ”Ğ½Ñ‚ÑÑ€Ğ²Ğ»",
                easy: "Ğ°Ğ±Ğ²Ğ³Ğ´ĞµÑ”Ğ¶Ğ·Ğ¸Ñ–Ñ—Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŒÑÑ",
                medium: "Ğ°Ğ±Ğ²Ğ³Ğ´ĞµÑ”Ğ¶Ğ·Ğ¸Ñ–Ñ—Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŒÑÑĞĞ‘Ğ’Ğ“Ğ”Ğ•Ğ„Ğ–Ğ—Ğ˜Ğ†Ğ‡Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©Ğ¬Ğ®Ğ¯",
                hard: 'Ğ°Ğ±Ğ²Ğ³Ğ´ĞµÑ”Ğ¶Ğ·Ğ¸Ñ–Ñ—Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŒÑÑĞĞ‘Ğ’Ğ“Ğ”Ğ•Ğ„Ğ–Ğ—Ğ˜Ğ†Ğ‡Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©Ğ¬Ğ®Ğ¯0123456789!"â„–;%:?*()-_=+'
            },
            en: {
                beginner: "aeioutnrsl",
                easy: "abcdefghijklmnopqrstuvwxyz",
                medium: "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",
                hard: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_=+'
            }
        };
        const RARE_CHARS = {
            ua: { beginner: "", easy: "Ò‘", medium: "Ò‘Ò", hard: "Ò‘Ò" },
            en: { beginner: "", easy: "", medium: "", hard: "" }
        };

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SPEED PRESETS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const SPEED_PRESETS = {
            slow: { animSpeed: 10000, spawnInterval: 2500 },
            medium: { animSpeed: 6000, spawnInterval: 1500 },
            fast: { animSpeed: 3500, spawnInterval: 800 }
        };
        const LEVEL_MOD = { beginner: 1.2, easy: 1.0, medium: 0.9, hard: 0.8 };

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MESSAGES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const MSG_OK = [
            "Ğ§ÑƒĞ´Ğ¾Ğ²Ğ¾!", "Ğ¡ÑƒĞ¿ĞµÑ€!", "Ğ’Ñ–Ğ´Ğ¼Ñ–Ğ½Ğ½Ğ¾!", "ĞšĞ»Ğ°ÑĞ½Ğ¾!", "ĞœĞ¾Ğ»Ğ¾Ğ´ĞµÑ†ÑŒ!", "ĞšÑ€ÑƒÑ‚Ğ¾!",
            "Ğ‘Ñ€Ğ°Ğ²Ğ¾!", "Ğ’Ğ»ÑƒÑ‡Ğ½Ğ¾!", "Ğ¢Ğ¾Ğ¿!", "Ğ‘Ğ»Ğ¸ÑĞºÑƒÑ‡Ğµ!", "Ğ‘Ğ¾Ğ¼Ğ±Ğ°!", "Ğ¢Ğ¸ Ğ·Ñ–Ñ€ĞºĞ°!",
            "Ğ¢Ğ°Ğº Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ñ‚Ğ¸!", "ĞÑÑŒ Ñ†Ğµ Ñ‚Ğ°Ğº!", "ĞĞµĞ¹Ğ¼Ğ¾Ğ²Ñ–Ñ€Ğ½Ğ¾!", "ĞšĞ»Ğ°Ñ!"
        ];
        const MSG_MISS = [
            "Ğ£Ğ¿Ñ!", "ĞŸÑ€Ğ¾Ğ¼Ğ°Ñ…!", "Ğ©Ğµ ÑĞ¿Ñ€Ğ¾Ğ±ÑƒĞ¹!", "ĞĞµ Ğ·Ğ´Ğ°Ğ²Ğ°Ğ¹ÑÑ!", "ĞĞº, Ğ´Ğ°Ğ»Ñ–!", "Ğ‘ÑƒĞ²Ğ°Ğ»Ğ¾!", "ĞĞ°ÑÑ‚ÑƒĞ¿Ğ½Ğ°!"
        ];
        const MSG_STREAK = {
            5: "5 Ğ¿Ñ–Ğ´Ñ€ÑĞ´! Ğ’Ğ¾Ğ³Ğ¾Ğ½ÑŒ!", 10: "10 Ğ¿Ñ–Ğ´Ñ€ÑĞ´! Ğ‘Ğ¾Ğ¼Ğ±Ğ°!",
            15: "15 Ğ¿Ñ–Ğ´Ñ€ÑĞ´! ĞĞµĞ¹Ğ¼Ğ¾Ğ²Ñ–Ñ€Ğ½Ğ¾!", 20: "20 Ğ¿Ñ–Ğ´Ñ€ÑĞ´! Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°!",
            25: "25 Ğ¿Ñ–Ğ´Ñ€ÑĞ´! Ğ¢Ğ¾Ğ¿ Ğ³Ñ€Ğ°Ğ²ĞµÑ†ÑŒ!", 30: "30 Ğ¿Ñ–Ğ´Ñ€ÑĞ´! ĞĞ•ĞœĞĞ–Ğ›Ğ˜Ğ’Ğ!"
        };

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           THEMES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const THEMES = ['sunny', 'ocean', 'night', 'berry'];
        const THEME_NAMES = { sunny: 'Ğ¡Ğ¾Ğ½ÑÑ‡Ğ½Ğ¸Ğ¹', ocean: 'ĞœĞ¾Ñ€ÑÑŒĞºĞ¸Ğ¹', night: 'ĞÑ–Ñ‡Ğ½Ğ¸Ğ¹', berry: 'Ğ¯Ğ³Ñ–Ğ´Ğ½Ğ¸Ğ¹' };

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GAME STATE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const gs = {
            score: 0, timer: GAME_DURATION_SEC, streak: 0, maxStreak: 0,
            level: "beginner", speed: "medium", lang: "ua",
            running: false,
            animSpeed: 6000, spawnInterval: 1500,
            adaptMult: 1.0, recentResults: [], lastAdaptChange: 0,
            activeLetters: new Map(),
            timerInterval: null, spawnTimeout: null,
            soundEnabled: true, colorIdx: 0, themeIdx: 0,
            // session stats
            totalCorrect: 0, totalMissed: 0,
            missedMap: {}, correctMap: {},
            gameStartTime: 0,
        };

        const keyMapUA = new Map();
        let audioCtx = null;
        let feedbackTimer = null;

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AUDIO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function initAudio() {
            try {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                gs.soundEnabled = false;
                updateSoundIcon();
            }
        }

        function playTone(freq, type = 'sine', dur = 0.1, gain = 0.09, delay = 0) {
            if (!gs.soundEnabled || !audioCtx) return;
            if (audioCtx.state === 'suspended') audioCtx.resume();
            try {
                const osc = audioCtx.createOscillator();
                const g = audioCtx.createGain();
                osc.connect(g); g.connect(audioCtx.destination);
                osc.type = type;
                osc.frequency.setValueAtTime(freq, audioCtx.currentTime + delay);
                g.gain.setValueAtTime(gain, audioCtx.currentTime + delay);
                g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + delay + dur + 0.04);
                osc.start(audioCtx.currentTime + delay);
                osc.stop(audioCtx.currentTime + delay + dur + 0.06);
                osc.onended = () => { try { osc.disconnect(); g.disconnect(); } catch (e) { } };
            } catch (e) { }
        }

        function playSound(type) {
            if (!gs.soundEnabled) return;
            switch (type) {
                case 'correct':
                    playTone(523, 'sine', 0.07, 0.09, 0);
                    playTone(659, 'sine', 0.07, 0.08, 0.06);
                    break;
                case 'miss':
                    playTone(220, 'square', 0.06, 0.05, 0);
                    break;
                case 'streak5':
                    [523, 659, 784, 1047].forEach((f, i) => playTone(f, 'sine', 0.09, 0.09, i * 0.08));
                    break;
                case 'streak10':
                    [523, 659, 784, 880, 1047, 1175].forEach((f, i) => playTone(f, 'sine', 0.09, 0.11, i * 0.07));
                    break;
                case 'gameOver':
                    [392, 330, 262, 196].forEach((f, i) => playTone(f, 'triangle', 0.22, 0.1, i * 0.22));
                    break;
                case 'adaptUp':
                    playTone(880, 'sine', 0.07, 0.07, 0); playTone(1047, 'sine', 0.07, 0.07, 0.09);
                    break;
                case 'adaptDown':
                    playTone(440, 'sine', 0.07, 0.07, 0); playTone(330, 'sine', 0.07, 0.07, 0.09);
                    break;
                case 'newRecord':
                    [523, 659, 784, 1047, 1175, 1319].forEach((f, i) => playTone(f, 'sine', 0.1, 0.11, i * 0.07));
                    break;
            }
        }

        function toggleSound() {
            gs.soundEnabled = !gs.soundEnabled;
            updateSoundIcon();
            if (gs.soundEnabled && audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
        }
        function updateSoundIcon() {
            const ic = document.getElementById('sound-icon');
            if (ic) ic.className = gs.soundEnabled ? 'fas fa-volume-high' : 'fas fa-volume-xmark';
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           KEY MAP (UA special chars)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function initKeyMap() {
            const specUA = { "!": "1", '"': "2", "â„–": "3", ";": "4", "%": "5", ":": "6", "?": "7", "*": "8", "(": "9", ")": "0", "_": "-", "+": "=" };
            for (const [c, k] of Object.entries(specUA)) keyMapUA.set(c, k);
        }

        function doesMatch(pressedKey, expectedChar) {
            // Letters: case-sensitive direct match
            if (expectedChar.toLowerCase() !== expectedChar.toUpperCase()) {
                return pressedKey === expectedChar;
            }
            // Digits / symbols
            const mapped = keyMapUA.get(expectedChar) || expectedChar;
            return pressedKey === mapped || pressedKey === expectedChar;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LANGUAGE TOGGLE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function toggleLanguage() {
            gs.lang = gs.lang === 'ua' ? 'en' : 'ua';
            const btn = document.getElementById('lang-toggle');
            const lbl = document.getElementById('lang-label');
            if (gs.lang === 'ua') {
                btn.className = 'icon-btn lang-btn ua-active';
                lbl.textContent = 'UA';
                showFeedback('Ğ ĞµĞ¶Ğ¸Ğ¼: Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°', true, 'neutral');
            } else {
                btn.className = 'icon-btn lang-btn en-active';
                lbl.textContent = 'EN';
                showFeedback('Mode: English', true, 'neutral');
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           THEME
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function cycleTheme() {
            gs.themeIdx = (gs.themeIdx + 1) % THEMES.length;
            const t = THEMES[gs.themeIdx];
            document.documentElement.setAttribute('data-theme', t);
            showFeedback('Ğ¢ĞµĞ¼Ğ°: ' + THEME_NAMES[t], true, 'neutral');
            try { localStorage.setItem('kt-theme', t); } catch (e) { }
        }
        function loadTheme() {
            try {
                const saved = localStorage.getItem('kt-theme');
                if (saved && THEMES.includes(saved)) {
                    gs.themeIdx = THEMES.indexOf(saved);
                    document.documentElement.setAttribute('data-theme', saved);
                }
            } catch (e) { }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LEVEL / SPEED
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function selectLevel(level) {
            gs.level = level;
            document.querySelectorAll('#levels .btn').forEach(b => b.classList.remove('selected'));
            document.getElementById(level).classList.add('selected');
            applySpeed();
        }
        function selectSpeed(speed) {
            gs.speed = speed;
            const idMap = { slow: 'slow', medium: 'medium-speed', fast: 'fast' };
            document.querySelectorAll('#speed-control .btn').forEach(b => b.classList.remove('selected'));
            document.getElementById(idMap[speed]).classList.add('selected');
            applySpeed();
        }
        function applySpeed() {
            const base = SPEED_PRESETS[gs.speed];
            const mod = LEVEL_MOD[gs.level];
            const am = gs.adaptMult;
            gs.animSpeed = (base.animSpeed * mod) / am;
            gs.spawnInterval = (base.spawnInterval * mod) / am;
            updateAdaptBar();
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ADAPTIVE DIFFICULTY â€” Ğ²Ğ¸Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function pushResult(ok) {
            gs.recentResults.push(ok);
            if (gs.recentResults.length > AD_WINDOW) gs.recentResults.shift();
            if (gs.recentResults.length < AD_MIN_DATA) return;

            const now = Date.now();
            if (now - gs.lastAdaptChange < AD_COOLDOWN_MS) return;

            const hitRate = gs.recentResults.filter(r => r).length / gs.recentResults.length;
            const old = gs.adaptMult;

            if (hitRate >= AD_UP_THRESH && old < AD_MAX) {
                gs.adaptMult = Math.min(AD_MAX, +(old + AD_STEP).toFixed(2));
                gs.lastAdaptChange = now;
                applySpeed();
                if (gs.adaptMult > old) { showFeedback('Ğ¢ĞµĞ¼Ğ¿ Ğ¿Ñ€Ğ¸ÑĞºĞ¾Ñ€ĞµĞ½Ğ¾!', true, 'neutral'); playSound('adaptUp'); }
            } else if (hitRate <= AD_DOWN_THRESH && old > AD_MIN) {
                gs.adaptMult = Math.max(AD_MIN, +(old - AD_STEP).toFixed(2));
                gs.lastAdaptChange = now;
                applySpeed();
                if (gs.adaptMult < old) { showFeedback('Ğ¢ĞµĞ¼Ğ¿ ÑĞ¿Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½ĞµĞ½Ğ¾', true, 'neutral'); playSound('adaptDown'); }
            }
        }

        function updateAdaptBar() {
            const pct = Math.round(((gs.adaptMult - AD_MIN) / (AD_MAX - AD_MIN)) * 100);
            const fill = document.getElementById('adaptive-fill');
            const pctEl = document.getElementById('adaptive-label-text');
            if (!fill) return;
            fill.style.width = pct + '%';
            fill.style.background = pct > 70 ? 'var(--c1)' : pct > 40 ? 'var(--c3)' : 'var(--c2)';
            pctEl.textContent = pct + '%';
            document.getElementById('adaptive-bar').classList.toggle('visible', gs.running);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RANDOM CHAR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function getRandChar() {
            const rare = RARE_CHARS[gs.lang][gs.level];
            if (rare && rare.length && Math.random() < RARE_CHAR_PROB)
                return rare[Math.floor(Math.random() * rare.length)];
            const pool = CHAR_SETS[gs.lang][gs.level];
            return pool[Math.floor(Math.random() * pool.length)];
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SPAWN LETTER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function spawnLetter() {
            if (!gs.running) return;
            if (gs.activeLetters.size >= MAX_ACTIVE_LETTERS) {
                gs.spawnTimeout = setTimeout(spawnLetter, gs.spawnInterval / 2);
                return;
            }

            const el = document.createElement('div');
            const char = getRandChar();
            const id = Date.now() + Math.random();
            const colN = gs.colorIdx++ % 3;

            el.className = `letter color-${colN}`;
            el.textContent = char;
            el.style.top = (Math.random() * (GAME_FIELD_H - LETTER_H)) + 'px';

            // â”€â”€ CSS variable for animation duration â€” used by both .letter and .letter.urgent â”€â”€
            el.style.setProperty('--letter-dur', gs.animSpeed + 'ms');

            // â”€â”€ FIX: also set the offset variable so urgent rule doesn't use wrong default â”€â”€
            el.style.setProperty('--letter-start-offset', '0ms');

            el.id = 'ltr-' + id;

            const data = { char, element: el, startTime: Date.now(), id };
            gs.activeLetters.set(id, data);
            document.getElementById('game-field').appendChild(el);

            // â”€â”€ Urgent: at 65% of journey â€” use --letter-start-offset trick to resume animation â”€â”€
            data.urgentTimeout = setTimeout(() => {
                if (!el.parentNode || el.classList.contains('correct') || el.classList.contains('missed')) return;
                const elapsed = Date.now() - data.startTime;
                // Negative delay resumes moveRight from current position (not restart)
                el.style.setProperty('--letter-start-offset', `-${elapsed}ms`);
                el.classList.add('urgent');
            }, gs.animSpeed * URGENT_RATIO);

            // â”€â”€ Missed: at 93% â€” freeze letter in place (near right edge, still visible) â”€â”€
            data.removeTimeout = setTimeout(() => {
                if (!el.parentNode || !gs.activeLetters.has(id)) return;

                // Pause animation â€” letter freezes at its current position (~93% â†’ near right edge)
                el.style.animationPlayState = 'paused';

                // Apply missed visuals via inline styles (highest specificity â€” no cascade conflicts)
                el.style.background = '#FF4757';
                el.style.color = '#FFFFFF';
                el.style.borderColor = '#CC0000';
                el.style.boxShadow = '3px 3px 0 var(--border-col)';
                el.style.opacity = '0.75';
                el.classList.remove('urgent');
                el.classList.add('missed');

                playSound('miss');
                gs.streak = 0; updateStreak();
                pushResult(false);
                gs.missedMap[char] = (gs.missedMap[char] || 0) + 1;
                gs.totalMissed++;
                showFeedback(MSG_MISS[Math.floor(Math.random() * MSG_MISS.length)], false);

                setTimeout(() => { if (el.parentNode) el.remove(); }, 500);
                gs.activeLetters.delete(id);
            }, gs.animSpeed * MISSED_RATIO);

            if (gs.running) gs.spawnTimeout = setTimeout(spawnLetter, gs.spawnInterval);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           KEY HANDLER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function handleKey(e) {
            if (!gs.running) return;
            if (e.ctrlKey || e.altKey || e.metaKey) return;

            const pressed = e.key;
            let found = false;

            for (const [id, data] of gs.activeLetters.entries()) {
                if (!data || !data.element) continue;
                if (!doesMatch(pressed, data.char)) continue;

                found = true;
                if (data.urgentTimeout) clearTimeout(data.urgentTimeout);
                if (data.removeTimeout) clearTimeout(data.removeTimeout);

                const diff = Date.now() - data.startTime;
                let pts = POINTS_DEFAULT;
                if (diff < TIME_FAST_MS) pts = POINTS_FAST;
                else if (diff < TIME_MEDIUM_MS) pts = POINTS_MEDIUM;

                gs.streak++;
                if (gs.streak > gs.maxStreak) gs.maxStreak = gs.streak;
                if (gs.streak % STREAK_BONUS_DIV === 0) pts += Math.floor(gs.streak / STREAK_BONUS_DIV);

                gs.score += pts;
                gs.totalCorrect++;
                gs.correctMap[data.char] = (gs.correctMap[data.char] || 0) + 1;

                // Freeze letter in place, apply correct animation via CSS transition
                data.element.style.animationPlayState = 'paused';
                data.element.classList.remove('urgent');
                data.element.classList.add('correct');

                playSound('correct');
                pushResult(true);

                let msg = MSG_OK[Math.floor(Math.random() * MSG_OK.length)];
                if (MSG_STREAK[gs.streak]) {
                    msg = MSG_STREAK[gs.streak];
                    showStreakBurst(msg);
                    playSound(gs.streak >= 10 ? 'streak10' : 'streak5');
                    launchConfetti(30);
                }
                if (pts > POINTS_DEFAULT) msg += ` +${pts}!`;
                showFeedback(msg, true);

                setTimeout(() => { if (data.element && data.element.parentNode) data.element.remove(); }, LETTER_REMOVE_DELAY_MS);
                gs.activeLetters.delete(id);
                updateScore(); updateStreak();
                break;
            }

            if (!found && pressed.length === 1 && !'shiftaltcontrolmeta'.includes(pressed.toLowerCase())) {
                gs.streak = 0; updateStreak();
                pushResult(false);
                showFeedback(MSG_MISS[Math.floor(Math.random() * MSG_MISS.length)], false);
                playSound('miss');
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GAME FLOW
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function clearAll() {
            gs.activeLetters.forEach(d => {
                if (d.urgentTimeout) clearTimeout(d.urgentTimeout);
                if (d.removeTimeout) clearTimeout(d.removeTimeout);
                if (d.element && d.element.parentNode) d.element.remove();
            });
            gs.activeLetters.clear();
        }

        function stopProcs() {
            gs.running = false;
            if (gs.timerInterval) { clearInterval(gs.timerInterval); gs.timerInterval = null; }
            if (gs.spawnTimeout) { clearTimeout(gs.spawnTimeout); gs.spawnTimeout = null; }
            clearAll();
        }

        function resetSession() {
            gs.score = 0; gs.timer = GAME_DURATION_SEC; gs.streak = 0; gs.maxStreak = 0;
            gs.adaptMult = 1.0; gs.recentResults = []; gs.lastAdaptChange = 0; gs.colorIdx = 0;
            gs.totalCorrect = 0; gs.totalMissed = 0; gs.missedMap = {}; gs.correctMap = {};
            gs.gameStartTime = Date.now();
            updateScore(); updateTimer(); updateStreak(); updateAdaptBar();
        }

        function startGame() {
            if (gs.running) return;
            stopProcs();
            if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
            resetSession();
            applySpeed();
            document.getElementById('go-overlay').style.display = 'none';
            document.getElementById('start-button').style.display = 'none';
            document.getElementById('restart-button').style.display = 'inline-flex';
            gs.running = true;
            updateAdaptBar();

            gs.timerInterval = setInterval(() => {
                gs.timer--;
                updateTimer();
                if (gs.timer <= 0) endGame();
            }, 1000);

            gs.spawnTimeout = setTimeout(spawnLetter, INITIAL_SPAWN_DELAY_MS);
        }

        function startGameFromGO() {
            document.getElementById('go-overlay').style.display = 'none';
            startGame();
        }

        function endGame() {
            stopProcs();
            buildResults();
            playSound('gameOver');
            launchConfetti(50);
            document.getElementById('go-overlay').style.display = 'flex';
            document.getElementById('start-button').style.display = 'inline-flex';
            document.getElementById('restart-button').style.display = 'none';
            updateAdaptBar();
        }

        function closeGO() {
            document.getElementById('go-overlay').style.display = 'none';
        }

        function askStop() {
            if (!gs.running) return;
            document.getElementById('confirm-modal').style.display = 'flex';
        }
        function closeConfirm() {
            document.getElementById('confirm-modal').style.display = 'none';
        }
        function confirmStop() {
            closeConfirm();
            stopProcs();
            resetSession();
            document.getElementById('start-button').style.display = 'inline-flex';
            document.getElementById('restart-button').style.display = 'none';
            updateAdaptBar();
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           UI UPDATES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function updateScore() {
            document.getElementById('score-val').textContent = gs.score;
            const el = document.getElementById('score');
            el.classList.add('pop');
            setTimeout(() => el.classList.remove('pop'), 220);
        }
        function updateTimer() {
            document.getElementById('timer-val').textContent = gs.timer;
            document.getElementById('timer').classList.toggle('timer-low', gs.timer <= LOW_TIME_THRESHOLD);
        }
        function updateStreak() {
            document.getElementById('streak-val').textContent = gs.streak;
            if (gs.streak > 0) {
                const el = document.getElementById('streak');
                el.classList.add('pop');
                setTimeout(() => el.classList.remove('pop'), 220);
            }
        }

        function showFeedback(msg, isPos = true, variant = '') {
            const el = document.getElementById('feedback-message');
            el.textContent = msg;
            el.className = 'show' + (!isPos ? ' negative' : variant === 'neutral' ? ' neutral' : '');
            if (feedbackTimer) clearTimeout(feedbackTimer);
            feedbackTimer = setTimeout(() => { el.classList.remove('show'); }, 1700);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FINAL RESULTS â€” Ğ¿Ğ¾Ğ²Ğ½Ğ° ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ· Ğ¿Ğ¾Ñ€Ğ°Ğ´Ğ°Ğ¼Ğ¸
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function buildResults() {
            const total = gs.totalCorrect + gs.totalMissed;
            const accuracy = total > 0 ? Math.round((gs.totalCorrect / total) * 100) : 0;
            const elapsed = Math.max(1, (Date.now() - gs.gameStartTime) / 1000);
            const cpm = Math.round((gs.totalCorrect / elapsed) * 60);

            // Stats
            document.getElementById('go-score').textContent = gs.score;
            document.getElementById('go-accuracy').textContent = accuracy + '%';
            document.getElementById('go-cpm').textContent = cpm;
            document.getElementById('go-streak').textContent = gs.maxStreak;

            // Tags
            const lvlNames = { beginner: 'Ğ”ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ğ¹', easy: 'ĞŸÑ€Ğ¾ÑÑ‚Ğ¸Ğ¹', medium: 'Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹', hard: 'Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ğ¸Ğ¹' };
            const spdNames = { slow: 'ĞŸĞ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğ°', medium: 'Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ', fast: 'Ğ¨Ğ²Ğ¸Ğ´ĞºĞ°' };
            const langName = gs.lang === 'ua' ? 'Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°' : 'English';
            document.getElementById('go-tags').innerHTML =
                `<span class="go-tag"><i class="fas fa-star"></i> ${lvlNames[gs.level]}</span>` +
                `<span class="go-tag"><i class="fas fa-gauge"></i> ${spdNames[gs.speed]}</span>` +
                `<span class="go-tag"><i class="fas fa-keyboard"></i> ${langName}</span>`;

            // Missed letters (top 4)
            const missedEntries = Object.entries(gs.missedMap)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 4);

            const missedSection = document.getElementById('go-missed-section');
            const missedRow = document.getElementById('go-missed-row');

            if (missedEntries.length) {
                missedRow.innerHTML = missedEntries
                    .map(([ch, n]) => `<span class="missed-chip">${escapeHtml(ch)}<sub>x${n}</sub></span>`)
                    .join('');
                missedSection.style.display = '';
            } else {
                missedRow.innerHTML = '';
                missedSection.style.display = 'none';
            }

            // Achievement
            const achEl = document.getElementById('go-achievement');
            achEl.textContent = getAchievementText({ accuracy, cpm, score: gs.score, maxStreak: gs.maxStreak, total });

            // Best record (per mode: language + level + speed)
            const bestEl = document.getElementById('go-best');
            const bestStore = loadBestStore();
            const modeKey = getModeKey();
            const prev = bestStore[modeKey];

            if (!prev || gs.score > prev.score) {
                bestStore[modeKey] = {
                    score: gs.score,
                    accuracy,
                    cpm,
                    maxStreak: gs.maxStreak,
                    ts: Date.now()
                };
                saveBestStore(bestStore);

                bestEl.style.display = 'block';
                bestEl.textContent = prev
                    ? `ğŸ† ĞĞ¾Ğ²Ğ¸Ğ¹ Ñ€ĞµĞºĞ¾Ñ€Ğ´ Ñƒ Ñ†ÑŒĞ¾Ğ¼Ñƒ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ–! Ğ‘ÑƒĞ»Ğ¾ ${prev.score}, ÑÑ‚Ğ°Ğ»Ğ¾ ${gs.score}`
                    : `ğŸ† ĞŸĞµÑ€ÑˆĞ¸Ğ¹ Ñ€ĞµĞºĞ¾Ñ€Ğ´ Ñƒ Ñ†ÑŒĞ¾Ğ¼Ñƒ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ–: ${gs.score}`;

                if (prev) playSound('newRecord');
            } else {
                bestEl.style.display = 'block';
                bestEl.textContent = `Ğ¢Ğ²Ñ–Ğ¹ Ñ€ĞµĞºĞ¾Ñ€Ğ´ Ñƒ Ñ†ÑŒĞ¾Ğ¼Ñƒ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ–: ${prev.score} (ÑÑŒĞ¾Ğ³Ğ¾Ğ´Ğ½Ñ–: ${gs.score})`;
            }

            // Tips
            const tipsEl = document.getElementById('go-tips-list');
            tipsEl.innerHTML = buildTipsHTML({ accuracy, cpm, missedEntries, score: gs.score, maxStreak: gs.maxStreak });
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STREAK BURST + CONFETTI (Ğ±ĞµĞ· Ğ·Ğ¾Ğ²Ğ½Ñ–ÑˆĞ½Ñ–Ñ… Ğ±Ñ–Ğ±Ğ»Ñ–Ğ¾Ñ‚ĞµĞº)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function showStreakBurst(text) {
            const overlay = document.getElementById('streak-overlay');
            const burst = document.getElementById('streak-burst');
            if (!overlay || !burst) return;

            burst.textContent = text;

            // Restart animation reliably
            overlay.classList.remove('show');
            burst.style.animation = 'none';
            void burst.offsetWidth; // reflow
            burst.style.animation = '';
            overlay.classList.add('show');

            setTimeout(() => overlay.classList.remove('show'), 1050);
        }

        function getThemePalette() {
            const cs = getComputedStyle(document.documentElement);
            const c1 = cs.getPropertyValue('--c1').trim() || '#FF4757';
            const c2 = cs.getPropertyValue('--c2').trim() || '#00BCD4';
            const c3 = cs.getPropertyValue('--c3').trim() || '#43A047';
            const bg = cs.getPropertyValue('--bg').trim() || '#FFE500';
            return [c1, c2, c3, bg];
        }

        function launchConfetti(count = 30) {
            // Lightweight DOM confetti (auto-cleans)
            const colors = getThemePalette();
            const holder = document.createElement('div');
            holder.style.position = 'fixed';
            holder.style.inset = '0';
            holder.style.pointerEvents = 'none';
            holder.style.zIndex = '9998';
            document.body.appendChild(holder);

            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.style.position = 'absolute';
                p.style.left = (Math.random() * 100) + 'vw';
                p.style.top = '-20px';
                p.style.width = (6 + Math.random() * 7) + 'px';
                p.style.height = (10 + Math.random() * 14) + 'px';
                p.style.borderRadius = (Math.random() > 0.7 ? '50%' : '2px');
                p.style.opacity = '0.95';
                p.style.background = colors[Math.floor(Math.random() * colors.length)];
                p.style.transform = `rotate(${Math.random() * 360}deg)`;

                holder.appendChild(p);

                const fall = 520 + Math.random() * 520;
                const drift = (Math.random() - 0.5) * 220;
                const spin = (Math.random() - 0.5) * 720;

                p.animate([
                    { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${drift}px, ${fall}px) rotate(${spin}deg)`, opacity: 0.9 },
                    { transform: `translate(${drift * 1.3}px, ${fall + 240}px) rotate(${spin * 1.3}deg)`, opacity: 0 }
                ], {
                    duration: 900 + Math.random() * 700,
                    easing: 'cubic-bezier(.18,.82,.32,1)',
                    fill: 'forwards'
                });
            }

            setTimeout(() => { try { holder.remove(); } catch (e) { } }, 2200);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HELPERS: results, tips, record
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const BEST_STORE_KEY = 'kt-best-modes-v1';

        function getModeKey() {
            return `${gs.lang}|${gs.level}|${gs.speed}`;
        }

        function loadBestStore() {
            try {
                const raw = localStorage.getItem(BEST_STORE_KEY);
                const obj = raw ? JSON.parse(raw) : {};
                return (obj && typeof obj === 'object') ? obj : {};
            } catch (e) {
                return {};
            }
        }

        function saveBestStore(obj) {
            try { localStorage.setItem(BEST_STORE_KEY, JSON.stringify(obj)); } catch (e) { }
        }

        function escapeHtml(s) {
            return String(s)
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }

        function getAchievementText({ accuracy, cpm, score, maxStreak, total }) {
            if (total === 0) return 'Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ñ‰Ğµ Ñ€Ğ°Ğ· â€” Ñ– Ğ²Ğ¸Ğ¹Ğ´Ğµ Ñ‰Ğµ ĞºÑ€Ğ°Ñ‰Ğµ!';
            if (accuracy >= 95 && maxStreak >= 15) return 'ğŸ¯ ĞœĞ°Ğ¹ÑÑ‚ĞµÑ€ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ñ–!';
            if (maxStreak >= 25) return 'ğŸ”¥ Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ğ° ÑĞµÑ€Ñ–Ñ!';
            if (cpm >= 220) return 'âš¡ Ğ”ÑƒĞ¶Ğµ ÑˆĞ²Ğ¸Ğ´ĞºĞ¾! Ğ¢Ğ¸ Ñ€Ğ°ĞºĞµÑ‚Ğ°!';
            if (score >= 120) return 'ğŸ† Ğ¡ÑƒĞ¿ĞµÑ€-Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚!';
            if (accuracy >= 80) return 'âœ… Ğ”ÑƒĞ¶Ğµ Ğ´Ğ¾Ğ±Ñ€Ğµ! Ğ¢Ğ°Ğº Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ñ‚Ğ¸!';
            if (accuracy >= 60) return 'ğŸ’ª Ğ”Ğ¾Ğ±Ñ€Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ â€” Ñ‚Ñ€ĞµĞ½ÑƒĞ¹ÑÑ Ñ‰Ğµ!';
            return 'ğŸ™‚ ĞÑ–Ñ‡Ğ¾Ğ³Ğ¾! ĞšĞ¾Ğ¶Ğ½Ğ° ÑĞ¿Ñ€Ğ¾Ğ±Ğ° Ñ€Ğ¾Ğ±Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ±Ğµ ĞºÑ€Ğ°Ñ‰Ğ¸Ğ¼!';
        }

        function buildTipsHTML({ accuracy, cpm, missedEntries, score, maxStreak }) {
            const tips = [];

            if (accuracy < 55) {
                tips.push({ icon: 'fa-gauge-simple-low', text: 'Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Â«ĞŸĞ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğ¾Â» Ğ°Ğ±Ğ¾ Â«Ğ”ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ğ¹Â» â€” Ñ‚Ğ°Ğº Ğ»ĞµĞ³ÑˆĞµ Ñ‚Ñ€ĞµĞ½ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ‚Ğ¾Ñ‡Ğ½Ñ–ÑÑ‚ÑŒ.' });
            } else if (accuracy < 75) {
                tips.push({ icon: 'fa-bullseye', text: 'Ğ¢Ğ²Ğ¾Ñ Ñ‚Ğ¾Ñ‡Ğ½Ñ–ÑÑ‚ÑŒ Ñ€Ğ¾ÑÑ‚Ğµ! Ğ”Ğ¸Ğ²Ğ¸ÑÑŒ Ğ½Ğ° Ğ±ÑƒĞºĞ²Ñƒ Ğ¹ Ğ½Ğ°Ñ‚Ğ¸ÑĞºĞ°Ğ¹ ÑĞ¿Ğ¾ĞºÑ–Ğ¹Ğ½Ğ¾, Ğ±ĞµĞ· Ğ¿Ğ¾ÑĞ¿Ñ–Ñ…Ñƒ.' });
            } else {
                tips.push({ icon: 'fa-bullseye', text: 'ĞšĞ»Ğ°ÑĞ½Ğ° Ñ‚Ğ¾Ñ‡Ğ½Ñ–ÑÑ‚ÑŒ! Ğ¢ĞµĞ¿ĞµÑ€ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ¿Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ²Ğ¾ Ğ¿Ñ–Ğ´Ğ²Ğ¸Ñ‰ÑƒĞ²Ğ°Ñ‚Ğ¸ ÑˆĞ²Ğ¸Ğ´ĞºÑ–ÑÑ‚ÑŒ.' });
            }

            if (missedEntries && missedEntries.length) {
                const chars = missedEntries.map(([ch]) => ch).join(' ');
                tips.push({ icon: 'fa-magnifying-glass', text: `ĞĞ°Ğ¹Ñ‡Ğ°ÑÑ‚Ñ–ÑˆĞµ Ğ³ÑƒĞ±Ğ»ÑÑ‚ÑŒÑÑ: ${escapeHtml(chars)}. ĞŸĞ¾Ñ‚Ñ€ĞµĞ½ÑƒĞ¹ Ñ†Ñ– ĞºĞ»Ğ°Ğ²Ñ–ÑˆÑ– Ğ¾ĞºÑ€ĞµĞ¼Ğ¾.` });
            } else {
                tips.push({ icon: 'fa-face-smile', text: 'Ğ¢Ğ¸ Ğ¼Ğ°Ğ¹Ğ¶Ğµ Ğ½Ñ–Ñ‡Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ²(Ğ»Ğ°) â€” ÑÑƒĞ¿ĞµÑ€!' });
            }

            if (cpm < 80) {
                tips.push({ icon: 'fa-person-walking', text: 'Ğ“Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğµ â€” Ñ€Ñ–Ğ²Ğ½Ğ¸Ğ¹ Ñ‚ĞµĞ¼Ğ¿. ĞšÑ€Ğ°Ñ‰Ğµ Ğ¿Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğ¾, Ğ°Ğ»Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾.' });
            } else if (cpm < 160) {
                tips.push({ icon: 'fa-gauge', text: 'Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¸Ğ¹ Ñ‚ĞµĞ¼Ğ¿! Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ñ€Ğ¾Ğ±Ğ¸Ñ‚Ğ¸ Ğ´Ğ¾Ğ²ÑˆÑ– ÑĞµÑ€Ñ–Ñ— Ğ±ĞµĞ· Ğ¿Ğ¾Ğ¼Ğ¸Ğ»Ğ¾Ğº.' });
            } else {
                tips.push({ icon: 'fa-person-running', text: 'Ğ’Ğ°Ñƒ, Ğ´ÑƒĞ¶Ğµ ÑˆĞ²Ğ¸Ğ´ĞºĞ¾! Ğ¡Ğ»Ñ–Ğ´ĞºÑƒĞ¹, Ñ‰Ğ¾Ğ± Ñ‚Ğ¾Ñ‡Ğ½Ñ–ÑÑ‚ÑŒ Ğ½Ğµ Ğ¿Ğ°Ğ´Ğ°Ğ»Ğ°.' });
            }

            if (maxStreak < 5) {
                tips.push({ icon: 'fa-fire', text: 'Ğ¡ĞµÑ€Ñ–Ñ— Ğ´Ğ°ÑÑ‚ÑŒ Ğ±Ğ¾Ğ½ÑƒÑĞ¸. Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ğ·Ğ¾ÑĞµÑ€ĞµĞ´Ğ¸Ñ‚Ğ¸ÑÑŒ Ğ½Ğ° 5 Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¸Ñ… Ğ¿Ñ–Ğ´Ñ€ÑĞ´!' });
            } else {
                tips.push({ icon: 'fa-fire', text: `Ğ¢Ğ²Ğ¾Ñ Ğ¼Ğ°ĞºÑ. ÑĞµÑ€Ñ–Ñ: ${maxStreak}. Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ğ¿Ğ¾Ğ±Ğ¸Ñ‚Ğ¸ Ñ—Ñ— Ğ½Ğ°ÑÑ‚ÑƒĞ¿Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ñƒ!` });
            }

            if (score < 40) tips.push({ icon: 'fa-star', text: 'ĞŸĞ¾Ñ‡Ğ°Ñ‚Ğ¾Ğº Ğ¿Ğ¾ĞºĞ»Ğ°Ğ´ĞµĞ½Ğ¾! ĞšĞ¾Ğ¶Ğ½Ğ° Ğ³Ñ€Ğ° â€” Ñ†Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑ.' });

            return tips
                .slice(0, 6)
                .map(t => `<div class="tip-item"><i class="fas ${t.icon}"></i><div>${t.text}</div></div>`)
                .join('');
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           INIT
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function init() {
            initKeyMap();
            loadTheme();
            initAudio();
            updateSoundIcon();

            const durEl = document.getElementById('game-duration-text');
            if (durEl) durEl.textContent = GAME_DURATION_SEC;

            document.addEventListener('keydown', (e) => {
                if (!gs.running) return;
                if (e.key && (e.key.length === 1 || e.key === ' ')) e.preventDefault();
            }, { passive: false });

            document.addEventListener('keydown', handleKey, { passive: false });

            window.addEventListener('pointerdown', () => {
                if (gs.soundEnabled && audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
            }, { once: true });

            document.addEventListener('visibilitychange', () => {
                if (document.hidden && gs.running) {
                    stopProcs();
                    resetSession();
                    document.getElementById('start-button').style.display = 'inline-flex';
                    document.getElementById('restart-button').style.display = 'none';
                    updateAdaptBar();
                }
            });
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>

</html>